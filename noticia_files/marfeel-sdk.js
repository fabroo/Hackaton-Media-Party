!function(){"use strict";((e,i)=>{var n,c;null!==(n=(c=window.marfeel.config).experiences)&&void 0!==n||(c.experiences={}),window.marfeel.config=Object.assign(Object.assign({},e),window.marfeel.config),Object.assign(window.marfeel.config.experiences,{preflight:i})})({},{"active":false,"hasPreflight":false,"recommender":{"enabled":true,"personalizedContent":false,"curatedContent":true},"preflight":{}})}();
var e,t,n,r,i={289:()=>{var e=marfeel;function t(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var s=e.apply(n,r);function a(e){t(s,i,o,a,c,"next",e)}function c(e){t(s,i,o,a,c,"throw",e)}a(void 0)}))}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=class{constructor(e,t,n,i,o,s){r(this,"config",void 0),r(this,"compassSDK",void 0),r(this,"synchronizer",void 0),r(this,"consentSDK",void 0),r(this,"eventsSDK",void 0),r(this,"executionData",void 0),r(this,"deferred",void 0),r(this,"moduleLoader",void 0),this.compassSDK=t,this.compassSDK.setRecirculationConfig({}),this.synchronizer=n,this.consentSDK=i,this.eventsSDK=o,this.deferred={promise:Promise.resolve(),resolve:()=>{},promiseResolve:()=>{}},this.moduleLoader=s,this.config={accountId:e.accountId,targeting:{}},this.executionData=Promise.resolve({handled:{},experiences:{}}),["mrfdebug","mrfexp"].some((e=>window.location.href.includes(e)))&&(this.moduleLoader.loadFile("https://sdk.mrf.io/statics/croupier-sdk.js","croupier-sdk",!0),this.moduleLoader.loadFile("https://sdk.mrf.io/statics/croupier-sdk.es5.js","croupier-sdk-es5",!1))}done(){}addTargeting(e,t){}addExperience(e,t){}addEventListener(e,t,n){}hasExperiences(e){return Promise.resolve(!1)}triggerExperiences(){return n((function*(){return Promise.resolve({handled:{},experiences:{}})}))()}hasExperimentation(e){return Promise.resolve(!1)}getRecommendations(e){return n((function*(){return Promise.resolve([])}))()}};(0,e.registerSDK)("experiences",["compass","synchronizer","consent","events","loader"],(()=>Promise.resolve(i)))},571:(e,t,n)=>{var r;n.d(t,{Z:()=>u});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).substr(1));const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&s.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},u=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return l(r)}}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return i[e](n,n.exports,s),n.loaded=!0,n.exports}s.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);s.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,s.d(i,o),i},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>({76:"4c80396ff373b43e4fe3",360:"d31ef6f2918eede5697b",761:"49a56fc9dc969345364d"}[e]+".js"),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="@marfeel/marfeel-sdk:",s.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var a,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+i){a=d;break}}a||(c=!0,(a=document.createElement("script")).type="module",a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",r+i),a.src=e),n[e]=[t];var h=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var i=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="https://sdk.mrf.io/statics/",(()=>{var e={179:0};s.f.j=(t,n)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=s.p+s.u(t),a=new Error;s.l(o,(n=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,a,c]=n,l=0;if(o.some((t=>0!==e[t]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);c&&c(s)}for(t&&t(n);l<o.length;l++)i=o[l],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk_marfeel_marfeel_sdk=self.webpackChunk_marfeel_marfeel_sdk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s.nc=void 0,(()=>{var e={};s.r(e),s.d(e,{TIMING_MARKS:()=>u,mark:()=>h,markAndMeasure:()=>m,measure:()=>p});var t=function(){try{var e;if(-1!==location.hash.indexOf("mrfdebug")||null!==(e=window.localStorage)&&void 0!==e&&e.getItem("mrfdebug")){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log("[piano js-callbacks]",...n)}}catch(e){}};function n(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))}}window.tp=window.tp||[],t("start",window.tp),Array.isArray(window.tp)?(t("piano handlers pushed"),window.tp.push(["addHandler","showOffer",function(e){t('"showOffer" handler called'),window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",function(n){t("resolve piano-offer"),n.resolve("piano-offer",e)}])}]),window.tp.push(["addHandler","checkoutComplete",function(e){t('"checkoutComplete" handler called'),window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",function(n){t("resolve piano-subscription"),n.resolve("piano-subscription",e)}])}])):t("piano handlers cant be pushed");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=class{constructor(e){o(this,"dependency",void 0),o(this,"buffer",[]),this.dependency=e}get(e){this.dependency?e(this.dependency):this.buffer.push(e)}resolve(e){this.dependency=e,this.buffer.splice(0).forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}},c=class{constructor(){o(this,"dependencies",{})}get(e,t){var n="string"==typeof e?[e]:e,r=new Array(e.length),i=e.length;i?n.forEach(((e,n)=>{this.dependencies[e]||(this.dependencies[e]=new a),this.dependencies[e].get((e=>{r[n]=e,0==--i&&t(...r)}))})):t(...r)}register(e,t){this.dependencies[e]?this.dependencies[e].resolve(t):this.dependencies[e]=new a(t)}};var l=[];var u=function(e){return e.LOADING_EXPERIENCES="loadingExperiences",e.END_LOADING_EXPERIENCES="endLoadingExperiences",e.INIT_HANDLE_INLINE_EXPERIENCE="initHandleInlineExperience",e.END_HANDLE_INLINE_EXPERIENCE="endHandleInlineExperience",e.INIT_HANDLE_EXPERIMENTATION="initHandleExperimentation",e.END_HANDLE_EXPERIMENTATION="endHandleExperimentation",e.INIT_HANDLE_ACTION="initHandleAction",e.END_HANDLE_ACTION="endHandleAction",e}({}),d=-1!==location.hash.indexOf("mrfdebug")||-1!==location.hash.indexOf("mrfexp"),h=e=>{d&&performance.mark(e)},p=(e,t,n)=>{if(d){var r=performance.measure("".concat(e," to ").concat(t),e,t);!function(){try{if(d){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.debug("%c[marfeel-sdk-timing] %c","color:#ff9423","color: inherit",...t)}}catch(e){}}("Timing from ".concat(e," to ").concat(t),r.duration,n)}},m=(e,t,n)=>{d&&(h(t),p(e,t,n))};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=window.location.href.includes("mrfExperiencesPreviewEnabled")?new class{constructor(){}registerSDK(){return r((function*(){}))()}addConfig(){return r((function*(){}))()}getSDKs(){}}:new class{constructor(t){var n=this;o(this,"dependenciesContainer",new c),o(this,"config",void 0),this.config=t.config;var r=e=>e.forEach((e=>this.getSDKs(...e)));r(t.cmd.splice(0)),t.cmd.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t),0};var i=g({},t);Object.assign(t,e,{registerSDK:function(){return n.registerSDK(...arguments)}},i),function(e){window.addEventListener("message",(t=>{if((!(s=t.origin)||"null"===s||s===window.location.origin||l.includes(s))&&(o=t.data)&&"__MRF_SDK__"===o.app){var{sdkName:n,methodName:r,args:i}=t.data;e.cmd.push([n,e=>{e[r].apply(e,i)}])}var o,s}))}(t)}registerSDK(e,t,n){var i=this;return r((function*(){i.dependenciesContainer.get(t,(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n(i.config,r).then((t=>{i.dependenciesContainer.register(e,new t(i.config,...r))})).catch((()=>{}))}))}))()}addConfig(e){var t=this;return r((function*(){t.config=g(g({},t.config),e)}))()}getSDKs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.slice(0,t.length-1),i=t[t.length-1];this.dependenciesContainer.get(r,i)}}(window.marfeel),y=function(){return v.registerSDK(...arguments)};function b(e){return"analytics_storage"===e?"cookies":e}var w=function(e){return e.READY="ready",e.ANSWERED="answered",e}(w||{});class k{constructor(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o(this,"onChangeCallbacks",void 0),o(this,"onReadyCallbacks",void 0),o(this,"consent",void 0),o(this,"features",void 0),o(this,"state",void 0),o(this,"isEnabled",void 0),this.consent=e,this.features={},this.onReadyCallbacks=[],this.onChangeCallbacks=[],this.isEnabled=!0,e&&(this.state=w.ANSWERED)}isInitiated(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?!this.isEnabled||this.state===w.READY||this.state===w.ANSWERED:!this.isEnabled||this.state===w.ANSWERED}isRealCMP(){return!1}setCMPLoaded(){this.state||(this.state=w.READY);var e=this.onReadyCallbacks.slice();this.onReadyCallbacks=[],e.forEach((e=>e()))}setCMPNotApplies(){this.isEnabled=!1,this.consent=!0,this.setCMPLoaded()}isActive(){return this.isEnabled}onReady(e){this.isInitiated(!1)?e():this.onReadyCallbacks.push(e)}onChange(e){var t;null===(t=this.onChangeCallbacks)||void 0===t||t.push(e)}callOnChange(){this.onChangeCallbacks.forEach((e=>e()))}getConsent(e){return e&&this.features&&void 0!==this.features[e]?this.features[e]:this.consent}setConsentFeatures(e){e.forEach((e=>{var{feature:t,consent:n}=e;this.features[b(t)]=n})),this.state||this.setCMPLoaded(),this.callOnChange(),this.state=w.ANSWERED}setConsent(e,t){this.features[b(e)]=t,this.callOnChange()}hasToPromptForConsent(e){e(!1)}hasConsentForVendor(e){return this.getConsent()}hasConsentForPurpose(e){return this.getConsent()}}var O=["tcloaded","useractioncomplete"],C={cookies:{vendors:[943],purposes:[1,7,8,9,10]},personalization:{vendors:[943],purposes:[1,5,6,7,8,9,10]}};class E{constructor(){o(this,"tcData",void 0),o(this,"isReady",!1);var e=()=>{this.isReady=!0};this.onReady(e.bind(this)),this.onChange((t=>{this.tcData=t,null!=t&&t.gdprApplies||e()}).bind(this))}isInitiated(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.isReady:!!this.tcData}isRealCMP(){return!0}isActive(){var e;return!(null==this||null===(e=this.tcData)||void 0===e||!e.gdprApplies)}hasToPromptForConsent(e){this.addEventListener((t=>{var n,r,{cmpStatus:i}=t;"loaded"===i&&(null===(n=(r=window).__tcfapi)||void 0===n||n.call(r,"ping",2,(t=>{var{displayStatus:n}=t;return e("disabled"!==n)})))}))}hasConsentForVendor(e){var t,n;return!0===(null===(t=this.tcData)||void 0===t||null===(n=t.vendor)||void 0===n?void 0:n.consents[e])}hasConsentForPurpose(e){var t,n;return!0===(null===(t=this.tcData)||void 0===t||null===(n=t.purpose)||void 0===n?void 0:n.consents[e])}matchRequirements(e){return!!e&&!!this.tcData&&e.vendors.every(this.hasConsentForVendor.bind(this))&&e.purposes.every(this.hasConsentForPurpose.bind(this))}onChange(e){this.addEventListener(((t,n)=>{!n||!O.includes(t.eventStatus)&&t.gdprApplies||e(t)}))}onReady(e){this.isInitiated(!1)?e():this.addEventListener((t=>{var n,r,{cmpStatus:i,listenerId:o}=t;"loaded"===i&&(e(),null===(n=(r=window).__tcfapi)||void 0===n||n.call(r,"removeEventListener",2,(()=>{}),o))}))}getConsent(e){return!(!this.tcData||this.tcData.gdprApplies)||this.matchRequirements(C[e])}addEventListener(e){var t,n;window.__tcfapi?null===(t=(n=window).__tcfapi)||void 0===t||t.call(n,"addEventListener",2,e):setTimeout((()=>this.addEventListener(e)),100)}}var S=s(571),P="flagConsentReady",T=function(e){return e[e.CONSENT_ACCEPTED=0]="CONSENT_ACCEPTED",e[e.CONSENT_NON_REJECTED=1]="CONSENT_NON_REJECTED",e[e.CONSENT_PRESENT=2]="CONSENT_PRESENT",e}(T||{}),A=e=>e.blockOnNoConsent?T.CONSENT_ACCEPTED:e.blockOnReject?T.CONSENT_NON_REJECTED:T.CONSENT_PRESENT;function I(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=r((function*(e,t,n,r){var i,o="".concat(P,"_").concat((0,S.Z)());return!e.blockOnNoConsent&&void 0===e.manualConsent&&r&&(i=window.setTimeout((()=>n.resolve(o)),r)),t.onReady((()=>{!function(e,t,n,r){var i=()=>!!t.getConsent("cookies")&&(n(),!0),o=()=>{i()||t.onChange(i)};switch(e){case T.CONSENT_ACCEPTED:o();break;case T.CONSENT_NON_REJECTED:o(),t.isInitiated()&&!t.getConsent("cookies")&&window.clearTimeout(r);break;default:n()}}(A(e),t,(()=>n.resolve(o)),i)})),n.wait(o)}))).apply(this,arguments)}class D{constructor(e){o(this,"handler",void 0),this.handler=function(e){return void 0!==e.gdpr&&!e.gdpr||!window.__tcfapi&&!window.gdprAppliesGlobally?new k(!e.manualConsent):new E}(e)}isInitiated(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.handler.isInitiated(e)}isRealCMP(){return this.handler.isRealCMP()}isActive(){return this.handler.isActive()}setCMPLoaded(){this.handler.setCMPLoaded()}setCMPNotApplies(){this.handler.setCMPNotApplies()}onChange(e){this.handler.onChange(e)}onReady(e){this.handler.onReady(e)}getConsent(e){return this.handler.getConsent(e)}setConsentFeatures(e,t){this.handler instanceof k||(this.handler=new k),this.handler.setConsentFeatures(e,t)}setConsent(e,t){this.handler instanceof k||(this.handler=new k),this.handler.setConsent(e,t)}hasToPromptForConsent(e){this.handler.hasToPromptForConsent(e)}hasConsentForVendor(e){return this.handler.hasConsentForVendor(e)}hasConsentForPurpose(e){return this.handler.hasConsentForPurpose(e)}}y("consent",[],(()=>Promise.resolve(D)));var _=e=>{"history"in window&&window.history.replaceState(history.state,"",e)};function R(){return R=r((function*(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(i=n.map((e=>e(!0))),o=new Array(i.length),a=0,new Promise(((e,t)=>{i.forEach(((n,r)=>{n.then((t=>{t&&e(t)})).catch((e=>{o[r]=e,(a+=1)===i.length&&t(o)}))}))}))).then((t=>{var n=window.top===window.self;t&&n&&(e=>{s.e(76).then(s.bind(s,76)).then((t=>{var{default:n,saveActiveOverlay:r}=t;new n(e),r()}))})(e)})).catch((()=>{}));var i,o,a})),R.apply(this,arguments)}function N(e){return r((function*(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new URL(window.location.href),r=!!n.searchParams.get(e);if(r&&t)try{_(function(e,t){var n,r=new URL(e.href);return null===(n=r.searchParams)||void 0===n||n.delete(t),r.toString()}(n,e))}catch(e){}return r}))}function L(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}"function"==typeof SuppressedError&&SuppressedError;const M={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};function V(e){const t=[];return e.forEach(((e,n)=>{t.push(n+"="+function(e){return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return M[e]}))}(e))})),t.join("&")}const x="undefined"!=typeof window&&/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)&&((e=window.navigator.userAgent)=>{const t=function(e,t){const n=(e||window.navigator.userAgent).match(/version\/(\d+(\.\d+)?)/i);return n&&n.length>1&&n[1]||""}(e),n=parseInt(t.split(".")[0],10);return!isNaN(n)&&n})()<13,U=(()=>{try{return"keepalive"in new Request("https://www.google.com/")}catch(e){return!1}})(),F="undefined"!=typeof window&&void 0!==window.navigator.sendBeacon,q="undefined"!=typeof window&&"fetch"in window;var z,B,H,W;function J(e,t,{contentType:n,sync:r=!1,onSuccessCallback:i,onErrorCallback:o,timeout:s,cancelOnTimeout:a}={}){const c=!!i||!!o,l=((e,t)=>x||!q&&!F||t?z.XHR:q&&(U||e)?z.FETCH:F&&!e?z.BEACON:z.XHR)(c,r),u=((e,t,n,r)=>t&&n&&e!==z.BEACON?r&&"AbortSignal"in window&&e===z.FETCH?B.ABORT:B.TIMER:B.NONE)(l,c,r?void 0:s,a),{onErrorCallback:d,onSuccessCallback:h}=((e,t,n,r)=>{if(e===B.TIMER){let e=!1;const i=window.setTimeout((()=>{e=!0,null==r||r(408)}),t),o=t=>n=>{e||(window.clearTimeout(i),null==t||t(n))};return{onSuccessCallback:o(n),onErrorCallback:o(r)}}return{onSuccessCallback:n,onErrorCallback:r}})(u,s,i,o),p=function(e,t){return"string"==typeof e?e:"application/x-www-form-urlencoded"===t?V(e):JSON.stringify(e)}(t,n);switch(l){case z.FETCH:return void((e,t,{contentType:n,keepalive:r=!1,timeout:i}={})=>{let o=t;const s=void 0!==i?{signal:window.AbortSignal.timeout(i)}:{};return n&&(o=new Blob([t],{type:n})),fetch(e,Object.assign({method:"POST",body:o,keepalive:r,credentials:"include"},s))})(e,p,{contentType:n,keepalive:!0,timeout:u===B.ABORT?s:void 0}).then((e=>(e.ok||null==d||d(e.status),e.text()))).then((e=>null==h?void 0:h(e))).catch((e=>{const t=(e=>e instanceof DOMException&&("TimeoutError"===e.name||e.code===DOMException.TIMEOUT_ERR))(e)?408:0;null==d||d(t)}));case z.BEACON:return void((e,t,{contentType:n}={})=>{let r=t;n&&(r=new Blob([t],{type:n})),window.navigator.sendBeacon(e,r)})(e,p,{contentType:n});default:return function(e,t,{onSuccessCallback:n,onErrorCallback:r,contentType:i,sync:o=!1}={}){const s=!o,a=new XMLHttpRequest;return a.open("POST",e,s),i&&a.setRequestHeader("Content-Type",i),a.withCredentials=!0,o||(a.onreadystatechange=()=>{4===a.readyState&&(200===a.status?null==n||n(a.responseText):null==r||r(a.status))}),a.send(t),o?a.responseText:void 0}(e,p,{onSuccessCallback:h,contentType:n,onErrorCallback:d,sync:r})}}(W=z||(z={}))[W.XHR=0]="XHR",W[W.FETCH=1]="FETCH",W[W.BEACON=2]="BEACON",function(e){e[e.ABORT=0]="ABORT",e[e.NONE=1]="NONE",e[e.TIMER=2]="TIMER"}(B||(B={})),function(e){e[e.ORIGIN=0]="ORIGIN",e[e.FALLBACK=1]="FALLBACK"}(H||(H={}));const G=e=>null==e?void 0:e.replace(/\/$/,"");class K{constructor(e,{fallback:t,fallbackWindow:n=5e3,onModeChange:r=(()=>{}),timeout:i,timeoutStrategy:o}={}){this.mode=H.ORIGIN,this.pendingRequests={},this.endpoint=G(e),this.fallback=G(t),this.fallbackWindow=n,this.onModeChange=r,this.timeout=i,this.timeoutStrategy=o instanceof String?{strategy:o}:o}setRequestStatus(e,t=!0){this.pendingRequests[e]=t}isRequestPending(e){return!!this.pendingRequests[e]}switchMode(e,t){this.mode=e,window.setTimeout((()=>this.onModeChange(e,t)),0)}getUri(e,t={},n=this.mode){const r=e.startsWith("/")?e:`/${e}`;return function(e,t){const n=new RegExp(`:(${Object.keys(t).join("|")})`,"g");return e.replace(n,((e,n)=>t[n]||e))}(`${n===H.ORIGIN?this.endpoint:this.fallback}${r}`,t)}post(e,t,n={}){var r;const{onErrorCallback:i,onSuccessCallback:o,skipResponse:s=!1,vars:a,timeout:c,leaving:l}=n,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["onErrorCallback","onSuccessCallback","skipResponse","vars","timeout","leaving"]),d=this.mode,h=e=>{var t;return 408===e&&(null===(t=this.timeoutStrategy)||void 0===t?void 0:t.processor)||(e=>e)},p=!!l||s,m=p?void 0:this.fallback&&(r=>{if(this.fallback&&d===H.ORIGIN){const i=h(r);this.switchMode(H.FALLBACK,r),this.post(e,i(t,e),n),window.setTimeout((()=>this.switchMode(H.ORIGIN)),this.fallbackWindow)}else null==i||i(r)})||i,f=p?void 0:t=>{null==o||o(t),this.setRequestStatus(e,!1)},g=this.isRequestPending(e)&&(null===(r=this.timeoutStrategy)||void 0===r?void 0:r.forceOnExit)&&this.mode===H.ORIGIN&&l,v=(t,n=this.mode)=>{var r;J(this.getUri(e,a,n),t,Object.assign(Object.assign({},u),{onSuccessCallback:f,onErrorCallback:m,timeout:null!=c?c:this.timeout,cancelOnTimeout:"abort"===(null===(r=this.timeoutStrategy)||void 0===r?void 0:r.strategy)}))};this.setRequestStatus(e,!p),v(t),g&&v(h(408)(t,e),H.FALLBACK)}}var $;!function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.LEAVING=2]="LEAVING",e[e.BF_CACHE=3]="BF_CACHE",e[e.LOAD=4]="LOAD"}($||($={}));const X=e=>{void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&e($.BACKGROUND)})),window.addEventListener("pagehide",(()=>{e($.LEAVING)}),{capture:!0}),window.addEventListener("blur",(()=>{"hidden"===document.visibilityState&&e($.BACKGROUND)}),{capture:!0}),x&&addEventListener("beforeunload",(()=>e($.LEAVING)),!0)},Y=e=>{void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState&&e($.FOREGROUND)})),window.addEventListener("pageshow",(t=>{e(t.persisted?$.BF_CACHE:$.LOAD)}),{capture:!0}),window.addEventListener("focus",(()=>{"hidden"!==document.visibilityState&&e($.FOREGROUND)}),{capture:!0})},Z=(e,t=!1)=>"replicas"in e?e:{api:e,replicas:1,primary:t};class Q{constructor(...e){this.apis=[],this.apis=e.map(((e,t)=>Z(e,0===t)))}registerApi(e){this.apis.push(Z(e))}post(...e){const[t,n,r]=e;this.apis.flatMap((e=>new Array(e.replicas).fill(e).map(((e,t)=>Object.assign(Object.assign({},e),{replicaId:`${t}`}))))).forEach((({api:e,replicaId:i,preprocess:o=(e=>e),primary:s})=>{try{const a=s?null==r?void 0:r.onSuccessCallback:void 0,c=s?null==r?void 0:r.onErrorCallback:void 0;e.post(t,o(n,null==r?void 0:r.contentType),Object.assign(Object.assign({},r),{onSuccessCallback:a,onErrorCallback:c,vars:Object.assign(Object.assign({},null==r?void 0:r.vars),{replicaId:i})}))}catch(e){}}))}}const ee={childList:!0,subtree:!0};let te;const ne=[],re=e=>{ne.forEach((t=>{t(e)}))};function ie(e){return new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&e(t.target)}))}))}const oe=(e,t=document.body)=>{const n=t===document.body;if(e){const i=((e,t)=>{let n;return function(...t){clearTimeout(n),n=setTimeout((()=>{e(...t)}),400)}})(e);"undefined"!=typeof MutationObserver&&(n?(r=()=>{i(document.body)},ne.push(r),te||(te=ie(re),te.observe(document.body,ee))):ie(i).observe(t,ee))}var r};let se={};const ae=e=>{const t=document.createElement("a");return t.href=e,t.origin},ce=(e,t)=>{var n,r,i;return"fbia"===e?window.ia_document.shareURL:t&&(null===(i=null===(r=null===(n=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===n?void 0:n.call(performance,"navigation"))||void 0===r?void 0:r[0])||void 0===i?void 0:i.name)||window.location.href},le=e=>"fbia"===e?window.ia_document.referrer:document.referrer,ue=e=>{const t=le(e);if(t)try{if(new URL(t).pathname.endsWith(".js"))return null}catch(e){}return t},de=RegExp("^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])");function he(e,{cache:t=!0,readonly:n=!0}={}){try{if(!n)return new URL(e,document.baseURI);if(!se[e]){const{host:n,hostname:r,pathname:i,port:o,protocol:s,search:a,hash:c,href:l,origin:u}=new URL(e,document.baseURI),d={host:n,hostname:r,pathname:i,port:o,protocol:s,search:a,hash:c,href:l,origin:u};if(!t)return d;se[e]=d}return Object.assign({},se[e])}catch(e){return{}}}const pe="data-mrf-link";function me(e,t,n=!0){const r=e;(n||!r.mrfLink)&&(r.mrfLink=t),(n||!e.hasAttribute(pe))&&e.setAttribute(pe,t)}const fe=e=>he(e).href,ge=e=>{try{const t=new URL(e);return t.host.includes("mrf.io")&&t.searchParams.get("url")||e}catch(t){return e}};var ve,ye=new Uint8Array(16);function be(){if(!ve&&!(ve="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ve(ye)}var we=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ke(e){return"string"==typeof e&&we.test(e)}for(var Oe=[],Ce=0;Ce<256;++Ce)Oe.push((Ce+256).toString(16).substr(1));function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Oe[e[t+0]]+Oe[e[t+1]]+Oe[e[t+2]]+Oe[e[t+3]]+"-"+Oe[e[t+4]]+Oe[e[t+5]]+"-"+Oe[e[t+6]]+Oe[e[t+7]]+"-"+Oe[e[t+8]]+Oe[e[t+9]]+"-"+Oe[e[t+10]]+Oe[e[t+11]]+Oe[e[t+12]]+Oe[e[t+13]]+Oe[e[t+14]]+Oe[e[t+15]]).toLowerCase();if(!ke(n))throw TypeError("Stringified UUID is invalid");return n}function Se(e,t,n){var r=(e=e||{}).random||(e.rng||be)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Ee(r)}function Pe(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function Te(e,t){return e<<t|e>>>32-t}var Ae=function(e,t,n){function r(e,t,n,r){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof t&&(t=function(e){if(!ke(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}(t)),16!==t.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),(i=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=e[64*c+4*u]<<24|e[64*c+4*u+1]<<16|e[64*c+4*u+2]<<8|e[64*c+4*u+3];a[c]=l}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=a[d][p];for(var m=16;m<80;++m)h[m]=Te(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);for(var f=n[0],g=n[1],v=n[2],y=n[3],b=n[4],w=0;w<80;++w){var k=Math.floor(w/20),O=Te(f,5)+Pe(k,g,v,y)+b+t[k]+h[w]>>>0;b=y,y=v,v=Te(g,30)>>>0,g=f,f=O}n[0]=n[0]+f>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}(i))[6]=15&i[6]|80,i[8]=63&i[8]|128,n){r=r||0;for(var o=0;o<16;++o)n[r+o]=i[o];return n}return Ee(i)}try{r.name="v5"}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}();const Ie=e=>!!e&&ke(e),je=()=>{try{return Se()}catch(e){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},De=(e,t)=>((e=!0)=>{const t=document.querySelector('meta[property="mrf:canonical"][content]'),n=null==t?void 0:t.getAttribute("content");return e?!!n&&fe(n)||null:n||null})(t)||((e=!0)=>{const t=document.querySelector('link[rel="canonical"][href]'),n=null==t?void 0:t.getAttribute("href");return e?!!n&&fe(n)||null:n||null})(t)||(e=>{if("fbia"===e){const e=document.createElement("a");return e.href=window.ia_document.shareURL,e.origin+e.pathname}return window.location.origin+window.location.pathname})(e),_e="scrollHeight",Re=[{qs:".mrf-current .mrf-detailsBody",max:999},{qs:".mrf-current .mrf-sectionPart",max:999},{qs:".mrf-article-body",max:999},{qs:"article",max:1}];let Ne,Le=0;const Me=(e,t=0,n=!0,r=!1)=>{let i;try{e&&(Ne=n||!Ne?Re.reduce(((e,t)=>{if(e)return e;const n=document.querySelectorAll(t.qs);return n&&n.length<=t.max?(e=>{const t=[];return e.forEach((e=>(e=>{const t=e.getBoundingClientRect();if(!t.width&&!t.height)return!1;const n=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth,i=t.top<=n&&t.top+t.height>=0,o=t.left<=r&&t.left+t.width>=0;return i&&o})(e)&&t.push(e))),t.length>0?t.sort(((e,t)=>t.offsetTop-e.offsetTop))[0]:null})(Array.from(n)):null}),null):Ne,Le=0);const r=(e=>{const t=(()=>{const e=document.body;return document.documentElement.scrollTop||!!e&&e.scrollTop||0})();return e?t-e.offsetTop:t})(Ne),o=(e=>{const t=document.body;return e?e.offsetHeight:document.documentElement[_e]||!!t&&t[_e]||0})(Ne),s=document.documentElement.clientHeight;i=t?(r+t)/o*100:r/(o-s)*100,i>Le?Le=i:i=Le}catch(e){i=50}return r?i:isNaN(i)?50:i>100?100:i<0?0:i},Ve={},xe=(()=>{try{const e="__test_session_storage__";return window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),!0}catch(e){return!1}})(),Ue=(e,t)=>{try{xe?window.sessionStorage.setItem(e,t):Ve[e]=t}catch(e){}},Fe=e=>{try{return xe?window.sessionStorage.getItem(e):Ve[e]}catch(e){return null}},qe=(e,t)=>{const n=JSON.stringify(t);Ue(e,n)},ze="https://events.newsroom.bi",Be="https://compassingest-:replicaId.staging.cl15.k8s.mrf.io",He="".concat(ze).concat("/ingest.php");let We,Je=!0;const Ge={getConsent:()=>Je,isInitiated:()=>!0,isRealCMP:()=>!0,setConsent:(e,t)=>{var n;Je=!0===(n=t)||"true"===n,Ue("__nrCookieConsent",Je),We&&We()},onChange:e=>{We=e}};function Ke(e){return e||!1===e}function $e(e){var t;return e.isInitiated()?null!=e&&null!==(t=e.isActive)&&void 0!==t&&t.call(e)?e.getConsent("cookies")?1:0:3:2}class Xe{static wait(){return Promise.resolve(!0)}static resolve(){}}class Ye{static emitRecirculation(){}}function Ze(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0!==e[t]||null===e[t]?e[t]:n}function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return Math.floor(e.getTime()/1e3)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const tt=function(e){const t=e=>e&&"object"==typeof e;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((e,n)=>(Object.keys(n).forEach((r=>{const i=e[r],o=n[r];Array.isArray(i)&&Array.isArray(o)?e[r]=[...i].concat(...o):t(i)&&t(o)?e[r]=tt(i,o):e[r]=o})),e)),e)},nt=(e,t)=>{const n=(e=>{try{const t=new URL(e);return Array.from(t.searchParams.entries()).filter((e=>{let[t]=e;return t.startsWith("mrf_")})).reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{})}catch(e){return{}}})(e);if(n[t])return"string"==typeof n[t]&&Ie(n[t])?n[t]:void 0},rt=e=>nt(e,"mrf_s"),it=e=>nt(e,"mrf_u"),ot=e=>[...new Set(e)],st=(e,t)=>{let n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];window.clearTimeout(n),n=window.setTimeout((()=>{e(...i)}),t)}};function at(e,t){if(!e||!t)return!1;let n;try{n=new URL(e).hostname.toLowerCase()}catch(t){n=e.toLowerCase()}const r=t.toLowerCase();if(r.startsWith(".")){const e=r.slice(1);return n===e||n.endsWith(".".concat(e))}return n===r}const ct=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=document.cookie.indexOf(e+"="),r=n+e.length+1;if(!n&&e!==document.cookie.substring(0,e.length))return null;if(-1===n)return null;let i=document.cookie.indexOf(";",r);return-1===i&&(i=document.cookie.length),t?decodeURIComponent(document.cookie.substring(r,i)):document.cookie.substring(r,i)},lt=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s=[i];i.startsWith(".")&&s.push(i.slice(1));const a=new Date;a.setTime(a.getTime());const c="https:"===window.location.protocol;s.forEach((i=>{document.cookie=e+"="+(o?encodeURIComponent(t):t)+(n?";expires="+n:"")+(r?";path="+r:"")+(i?";domain="+i:"")+(c?";secure":"")}))},ut=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=").concat(t||"/","; domain=").concat(n||"",";"),n.startsWith(".")&&ut(e,t,n.slice(1))},dt=e=>{const t="mrf_cookie";lt(t,"ok",void 0,"/",e);const n=ct(t);return ut(t,"/",e),!!n},ht={score:"-1"},pt="".concat("https://compassdynamicpaywall.mrf.io","/score/"),mt="".concat("https://compassdynamicpaywall.mrf.io","/predict/"),ft=e=>{let{accountId:t,userId:n,siteUserId:r,totalPageviews:i,sessionDuration:o}=e;const s=new URLSearchParams(window.location.search),a=s.get("utm_medium"),c=s.get("utm_source"),l=["ac=".concat(t),"url=".concat(encodeURIComponent(window.location.href)),"u=".concat(n),"pp=".concat(document.referrer)];return r&&l.push("sui=".concat(r)),a&&l.push("utm_medium=".concat(a)),c&&l.push("utm_source=".concat(c)),i&&l.push("tp=".concat(i)),o&&l.push("sd=".concat(o)),l.join("&")};let gt;const vt="https://events.newsroom.bi/data/rfv.php",yt={rfv:"-1"},bt=(e,t)=>{const n={rfv:e,ts:new Date};return Ue("".concat("compass_rfv","_").concat(t),JSON.stringify(n)),e},wt=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new FormData;return i.append("u",t),i.append("ac",e),i.append("sui",n||""),i.append("nu","".concat(+r)),i},kt=e=>{const{ts:t,rfv:n}=(e=>{const t=Fe("".concat("compass_rfv","_").concat(e));let n={ts:null,rfv:null};if(t)try{n=JSON.parse(t)}catch(e){}return n})(e);return(e=>{if(!e)return!0;const t=new Date(e);return t.setMinutes(t.getMinutes()+30),t<new Date})(t)?null:n},Ot={},Ct=(()=>{try{const e="__test_local_storage__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}})(),Et=(e,t)=>{try{Ct?window.localStorage.setItem(e,t):Ot[e]=t}catch(e){}},St=["data-mrf-recirculation","data-dtm-region","dtm-region"],Pt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?" ".concat(e):e;return St.map((e=>"[".concat(e,"]").concat(t))).join(",")};function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const It=e=>e&&e.split("?")[0].split("#")[0],jt=()=>[...document.body.querySelectorAll(Pt())].filter((e=>e.shadowRoot)),Dt=e=>null!==e.getAttribute("data-mrf-layout")&&null===e.getAttribute("data-mrf-layout-anchor")?e.querySelector("[".concat("data-mrf-layout-anchor","]")):e,_t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=Dt(e);if(!n)return null;if(n!==e)return _t(n,t);const r=function(e,t){if(!e)return null;let n=null;if(n=t?e.getAttribute(t):"mrfLink"in e&&e.mrfLink||e.getAttribute(pe)||e.getAttribute("href")||e.getAttribute("data-mrf-uri"),null===n)return null;const r=he(n||"");return"null"===r.origin?null:r.href}(e,t);return r?(e=>!!e&&he(e).host===window.location.host)(r)?r&&It(r):r:null};function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Nt=()=>(e=>{const t=(e=>{try{return Ct?window.localStorage.getItem(e):Ot[e]}catch(e){return null}})("___m_rec");if(t)try{return JSON.parse(t)}catch(e){}return null})(),Lt=(e,t)=>{if(Ct){const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Nt()||{});n[t]=e,Et("___m_rec",JSON.stringify(n))}};function Mt(e,t,n){const r=e.getAttribute(n);t.forEach((e=>{let{el:t}=e;t.getAttribute(n)!==r&&t.setAttribute(n,r||"")}))}const Vt=e=>e.hasAttribute("cmp-ltrk"),xt=e=>e.hasAttribute("data-mrf-recirculation-skip"),Ut=e=>e.getAttribute("cmp-ltrk-idx"),Ft=(e,t,n)=>{e.setAttribute("cmp-ltrk",t),e.setAttribute("cmp-ltrk-idx","".concat(n))},qt=e=>"[".concat("cmp-ltrk",'="').concat(e,'"]'),zt=(e,t,n)=>{const r=e.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=[...n],o=i.pop();if(i.some((e=>!Boolean(e))))return;const s="missing"===t?":not([".concat(o,"])"):"",a=i.join(" ");return Pt("".concat(a).concat(s))};return{element:n(e.element,"data-mrf-layout"),anchor:e.anchor?n(e.element,e.anchor,"data-mrf-layout-anchor"):n(e.element,"data-mrf-layout-anchor"),img:n(e.element,e.img,"data-mrf-layout-img"),title:n(e.element,e.title,"data-mrf-layout-title")}}(e,"missing")[t])).filter(Boolean).join(",");r&&Array.from(document.querySelectorAll(r)).forEach((e=>e.setAttribute(n,"")))},Bt=e=>{e.length&&(zt(e,"element","data-mrf-layout"),zt(e,"anchor","data-mrf-layout-anchor"),zt(e,"img","data-mrf-layout-img"),zt(e,"title","data-mrf-layout-title"))},Ht=e=>{const t={};return e.reduce(((e,n)=>{const{el:r}=n,i=(e=>{try{const t=Ut(e);if(t)return parseInt(t,10)}catch(e){}})(r);return void 0!==i&&t[i]||(e.push(n),t[i]=!0),e}),[])},Wt={"data-mrf-experiment":"tv","mrf-site-ext":"ac2","cmp-ltrk-ext":"n2","mrf-editorial-id":"".concat("meta:").concat("mrf-editorial-id")},Jt={"data-mrf-root-experiment":["tv","".concat("meta:","tv")]},Gt=(e,t,n,r)=>{if(r.startsWith("meta:")){var i;const[o,s]=r.split("meta:");null!==(i=e.meta)&&void 0!==i||(e.meta={}),e.meta[s]=t.getAttribute(n)}else e[r]=t.getAttribute(n)},Kt=(e,t)=>{let{el:n,root:r}=e;const i={url:_t(n,t)},o=Ut(n);if(o){if(parseInt(o,10)>=255)return;i.p=o}return r&&Object.entries(Jt).forEach((e=>{let[t,n]=e;r.getAttribute(t)&&n.forEach((e=>Gt(i,r,t,e)))})),Object.entries(Wt).forEach((e=>{let[t,r]=e;n.getAttribute(t)&&Gt(i,n,t,r)})),i},$t=(e,t)=>e.map(((e,n)=>{const r=Kt(e,t);return r?(parseInt(r.p,10)===n&&delete r.p,Object.keys(r).length>1?r:r.url):null})).filter((e=>!!e)),Xt=(e,t)=>{var n;return!("object"!=typeof e||!t||"control"!==(null==e||null===(n=e.meta)||void 0===n?void 0:n.tv)||t.startsWith("IL_"))};let Yt;const Zt={};class Qt{constructor(){this.timer=null}callOnTimer(e,t){this.timer=setTimeout((()=>{e()}),t)}cleanAndCallTimer(e,t){this.cleanTimer(),this.timer=setTimeout((()=>{e()}),t)}cleanTimer(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}}class en{constructor(){this.store={}}push(e,t){this.store[e]?this.store[e].push(t):this.store[e]=[t]}clear(e){delete this.store[e]}contains(e,t){var n;return null===(n=this.store[e])||void 0===n?void 0:n.includes(t)}forEach(e){return Object.entries(this.store).forEach(e)}}const tn=new Qt,nn=new en,rn=new en,on=e=>{const t=[];nn.forEach((e=>{let[n,r]=e;const i=r.map((e=>Kt(e.link,e.urlAttr))).filter((e=>!!e&&!Xt(e,n)));i.length&&t.push({module:n,links:i}),nn.clear(n)})),Object.keys(t).length>0&&e("impression",t)},sn=(e,t)=>{e.forEach((e=>{let{links:n,urlAttr:r,name:i}=e;i&&n.forEach((e=>{const n="element"===e.intersectionStrategy?e.el:Array.from(e.el.children).find((e=>e instanceof HTMLElement));n&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?Promise.resolve():s.e(360).then(s.t.bind(s,360,23));e.setAttribute("mrfObservableId",je()),Zt[e.getAttribute("mrfObservableId")]=t,r.then((()=>{Yt=Yt||new IntersectionObserver((e=>{e.filter((e=>e.isIntersecting)).forEach((e=>{let{target:t}=e;const r=t.getAttribute("mrfObservableId");var i;r?(null===(i=Zt[r])||void 0===i||i.call(Zt,t),n||(Yt.unobserve(t),delete Zt[r])):Yt.unobserve(t)}))})),Yt.observe(e)}))}(n,(()=>{((e,t,n)=>{const r=Ut(t.el);rn.contains(e,r)||(nn.push(e,{link:t,urlAttr:n}),rn.push(e,r))})(i,e,r),tn.cleanAndCallTimer((()=>on(t)),1e3)}))}))})),on(t)};function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ln=(e,t)=>{const n=e.map((e=>{let{name:t,links:n,urlAttr:r}=e;const i=$t(n,r);if(i.length)return{module:t,links:i}})).filter((e=>!!e));n.length&&t("elegible",n)},un=(e,t)=>{e.forEach((e=>{let{name:n,links:r,urlAttr:i}=e;r.forEach((e=>{e.el.addEventListener("click",(r=>{const o=e.el,s=_t(o,i);if(a=e.el,!r.__mrfTracked&&!0!==(null===(c=Dt(a))||void 0===c?void 0:c.__mrfTracked)&&s){const o=$t([e],i);if(o.length&&Xt(o[0],n))return;((e,t)=>{const n=Dt(e);t.__mrfTracked=!0,n&&(n.__mrfTracked=!0)})(e.el,r),Lt(n||"",s),o.length&&t("click",[{module:n,links:o}])}var a,c}))}))}))},dn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2?arguments[2]:void 0;const r=n?"a":St.map((e=>"[".concat(e,"] a[href], a[href][").concat(e,"], [").concat(e,"] article[data-mrf-uri], [").concat(e,"] [").concat("data-mrf-layout","]"))).join(","),i=Array.from(t.querySelectorAll(r)).reduce(((t,r)=>{const i=(e=>e&&e.closest(Pt()))(r)||n,o=(e=>{var t;return null===(t=St.reduce(((t,n)=>t||(null==e?void 0:e.getAttribute(n))),void 0))||void 0===t?void 0:t.replace(/"/g,'\\"')})(i),s=(null==i?void 0:i.getAttribute("data-mrf-recirculation-url-attribute"))||"",a=r,c=_t(a,s);if(c&&me(a,c,!1),!o||!c||!e(o,a))return t;const l=t[o]||{links:[]},u="contents"===window.getComputedStyle(a,null).display;return cn(cn({},t),{},{[o]:cn(cn({},l),{},{links:[...l.links,{el:a,root:i,intersectionStrategy:u?"child":"element"}],urlAttr:s})})}),{});return(e=>{const t=jt();Object.entries(e).forEach((e=>{let[n,{links:r,urlAttr:i}]=e;const o=(e=>Number(e.map((e=>e.getAttribute("cmp-ltrk-idx"))).filter(Boolean).map((e=>e?parseInt(e,10):0)).reduce(((e,t)=>isNaN(e)||e<t?t:e),NaN)))(((e,t)=>{const n=t.filter((t=>{return n=e,r=t,St.some((e=>{var t;return(null===(t=r.getAttribute(e))||void 0===t?void 0:t.toLowerCase())===n.toLowerCase()}));var n,r})).reduce(((t,n)=>{var r;return[...t,...(null===(r=n.shadowRoot)||void 0===r?void 0:r.querySelectorAll(qt(e)))||[]]}),[]);return[...document.querySelectorAll(qt(e)),...n]})(n,t));let s=isNaN(o)?0:o+1;r.forEach((e=>{const{el:t,root:o}=e,a=_t(t,i);if(xt(t)||Vt(t)||!a)return;const c=((e,t,n)=>{const r=n.closest("[".concat("data-mrf-layout","]")),i=null==r?void 0:r.getAttribute("cmp-ltrk-idx");return r&&r.mrfLink===t&&i&&!isNaN(i)?i:e})(s,a,t);Ft(t,n,c);const l=r.filter((e=>{let{el:n,root:r}=e;return n!==t&&r===o&&!xt(n)&&!Vt(n)&&_t(n,i)===a}));if(l.length){var u;const t=((e,t)=>{const n=document.querySelectorAll(t);let r=e;for(let i=0;i<8&&r.parentElement;i++){const i=Array.from(r.querySelectorAll(t)).filter((e=>null!==e.offsetParent));if(i.length>=n.length&&i.some((t=>!t.isEqualNode(e))))return r;if(null!==r.getAttribute("data-mrf-layout"))return null;r=r.parentElement}return null})(l[0].el,'a[href="'.concat(a,'"]'));(null!==(u=null==t?void 0:t.querySelectorAll("a"))&&void 0!==u?u:[]).length<=l.length+5&&(l.forEach((e=>{let{el:t}=e;return Ft(t,n,c)})),(e=>{let t=!1;if(["data-mrf-experiment"].forEach((n=>{const r=e.find((e=>{let{el:t}=e;return t.hasAttribute("data-mrf-experiment")}));r&&(Mt(r.el,e,n),t=!0)})),!t){const t=new MutationObserver((n=>{n.forEach((n=>{"attributes"===n.type&&"data-mrf-experiment"===n.attributeName&&(Mt(n.target,e,"data-mrf-experiment"),t.disconnect())}))}));e.forEach((e=>{let{el:n}=e;t.observe(n,{attributes:!0,attributeFilter:["data-mrf-experiment"]})}))}})([...l,e]))}s++}))}))})(i),Object.entries(i).map((e=>{let[t,n]=e;return{name:t,links:n.links,urlAttr:n.urlAttr}}))},hn=e=>e.map((e=>{let{links:t,name:n,urlAttr:r}=e;return{name:n,urlAttr:r,links:Ht(t)}}));function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parentNode:r,layouts:i=[]}=n;Bt(i);const o=dn(((e,t)=>!Vt(t)&&!xt(t)),t,r),s=hn(o);return ln(s,e),sn(o,e),un(o,e),o.length}function mn(e,t,n,r){pn(e,t,n)&&r(),oe((t=>{pn(e,t,n)&&r()}),t)}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class vn{constructor(){o(this,"modules",void 0),this.modules={}}processModules(e,t,n){const r=t.filter(n);return r.length?(this.modules=gn(gn({},this.modules),r.reduce(((t,n)=>gn(gn({},t),{},{[n.n]:"elegible"!==e})),{})),t.map((e=>{if(r.find((t=>t.n===e.n))){const t=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>function(e){var t;return"object"==typeof e&&null!==e&&!(null===(t=e.meta)||void 0===t||!t.tv)}(e)));return e?e.meta.tv:void 0}(e.e);return gn(gn({},e),{},{e:[...e.e,gn({url:" ",p:"255"},t?{tv:t}:{})]})}return e}))):t}process(e,t){return"elegible"===e?this.processModules(e,t,(e=>!Object.keys(this.modules).includes(e.n))):"impression"===e?this.processModules(e,t,(e=>void 0!==this.modules[e.n]&&!this.modules[e.n])):t}}const yn=["meta"],bn=async()=>{document&&"loading"===document.readyState&&await new Promise((e=>{document.addEventListener("DOMContentLoaded",e)}))},wn=(e,t)=>{e&&t&&Lt("fc:".concat(e),t)},kn=e=>{let{modules:t,blacklist:n,redirectionLinks:r}=e,i=!1;return n.forEach((e=>{let{selector:t}=e;const n=document.querySelectorAll(t);Array.from(n).forEach((e=>{e instanceof HTMLElement&&!e.hasAttribute("data-mrf-recirculation-skip")&&e.setAttribute("data-mrf-recirculation-skip","")}))})),null==r||r.forEach((e=>{let{selector:t,queryParam:n}=e;const r=document.querySelectorAll(t);Array.from(r).forEach((e=>{if(!e.hasAttribute("data-mrf-recirculation-skip"))try{const r=(t=new URL(decodeURIComponent(decodeURIComponent(e.href))).search).length?t.slice(1).split("&").map((e=>e.split("="))).reduce(((e,t)=>{let[n,r]=t;return At(At({},e),{},{[n]:r})}),{}):{};r[n]&&me(e,decodeURIComponent(r[n]))}catch(e){}var t}))})),t.forEach((e=>{const t="selector"in e?e.selector:"[".concat(e.attr,"]"),n="name"in e?()=>e.name:t=>t.getAttribute(e.attr),r=document.querySelectorAll(t),o=e.urlAttribute;Array.from(r).forEach((e=>{(e=>(e=>(null===window||void 0===window?void 0:window.HTMLElementOrig)?e instanceof window.HTMLElementOrig:e instanceof HTMLElement)(e)&&!e.hasAttribute("data-mrf-recirculation-skip")&&!e.hasAttribute("data-mrf-recirculation")&&!e.closest("[data-mrf-experience]"))(e)&&(e.setAttribute("data-mrf-recirculation",n(e)),o&&e.setAttribute("data-mrf-recirculation-url-attribute",o),i=!0)}))})),i},On=e=>"object"==typeof e&&null!==e?L(e,yn):e;class Cn{t;o=0;i=[];u(e){if(e.hadRecentInput)return;const t=this.i[0],n=this.i.at(-1);this.o&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this.o+=e.value,this.i.push(e)):(this.o=e.value,this.i=[e]),this.t?.(e)}}const En=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Sn=e=>{if("loading"===document.readyState)return"loading";{const t=En();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}}return"complete"},Pn=e=>{const t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Tn=e=>{let t="";try{for(;9!==e?.nodeType;){const n=e,r=n.id?"#"+n.id:[Pn(n),...Array.from(n.classList).sort()].join(".");if(t.length+r.length>99)return t||r;if(t=t?r+">"+t:r,n.id)break;e=n.parentNode}}catch{}return t},An=new WeakMap;function In(e,t){return An.get(e)||An.set(e,new t),An.get(e)}let jn=-1;const Dn=()=>jn,_n=e=>{addEventListener("pageshow",(t=>{t.persisted&&(jn=t.timeStamp,e(t))}),!0)},Rn=(e,t,n,r)=>{let i,o;return s=>{t.value>=0&&(s||r)&&(o=t.value-(i??0),(o||void 0===i)&&(i=t.value,t.delta=o,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},Nn=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},Ln=()=>En()?.activationStart??0,Mn=(e,t=-1)=>{const n=En();let r="navigate";return Dn()>=0?r="back-forward-cache":n&&(document.prerendering||Ln()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Vn=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe({type:e,buffered:!0,...n}),r}}catch{}},xn=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let Un=-1;const Fn=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,qn=e=>{"hidden"===document.visibilityState&&Un>-1&&(Un="visibilitychange"===e.type?e.timeStamp:0,Bn())},zn=()=>{addEventListener("visibilitychange",qn,!0),addEventListener("prerenderingchange",qn,!0)},Bn=()=>{removeEventListener("visibilitychange",qn,!0),removeEventListener("prerenderingchange",qn,!0)},Hn=()=>{if(Un<0){const e=Ln(),t=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((t=>"hidden"===t.name&&t.startTime>e))[0]?.startTime;Un=t??Fn(),zn(),_n((()=>{setTimeout((()=>{Un=Fn(),zn()}))}))}return{get firstHiddenTime(){return Un}}},Wn=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},Jn=[1800,3e3],Gn=(e,t={})=>{Wn((()=>{const n=Hn();let r,i=Mn("FCP");const o=Vn("paint",(e=>{for(const t of e)"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-Ln(),0),i.entries.push(t),r(!0)))}));o&&(r=Rn(e,i,Jn,t.reportAllChanges),_n((n=>{i=Mn("FCP"),r=Rn(e,i,Jn,t.reportAllChanges),Nn((()=>{i.value=performance.now()-n.timeStamp,r(!0)}))})))}))},Kn=[.1,.25],$n=e=>e.find((e=>1===e.node?.nodeType))||e[0];let Xn=0,Yn=1/0,Zn=0;const Qn=e=>{for(const t of e)t.interactionId&&(Yn=Math.min(Yn,t.interactionId),Zn=Math.max(Zn,t.interactionId),Xn=Zn?(Zn-Yn)/7+1:0)};let er;const tr=()=>er?Xn:performance.interactionCount??0;let nr=0;class rr{l=[];h=new Map;m;p;v(){nr=tr(),this.l.length=0,this.h.clear()}M(){const e=Math.min(this.l.length-1,Math.floor((tr()-nr)/50));return this.l[e]}u(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.l.at(-1);let n=this.h.get(e.interactionId);if(n||this.l.length<10||e.duration>t.T){if(n?e.duration>n.T?(n.entries=[e],n.T=e.duration):e.duration===n.T&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],T:e.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort(((e,t)=>t.T-e.T)),this.l.length>10){const e=this.l.splice(10);for(const t of e)this.h.delete(t.id)}this.p?.(n)}}}const ir=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=xn(e),document.addEventListener("visibilitychange",e,{once:!0}),t((()=>{e(),document.removeEventListener("visibilitychange",e)})))},or=[200,500];class sr{m;u(e){this.m?.(e)}}const ar=[2500,4e3];class cr{constructor(){this.cls=0,this.lcp=0,this.fcp=0,this.wv=0,this.tbt=0,this.inp=0,this.lcpOffender=null,this.clsOffender=null,this.inpOffender=null,this.inpOffenderStatus=null,this.inpOffenderScript=null,this.inpOffenderScriptFn=null,this.inpOffenderScriptInvoke=null,this.inpInputDelay=null,this.inpProcessingDuration=null,this.inpPresentationDelay=null,this.inpIntersectionDuration=null,Array.prototype.at&&(this.setTbt(),this.setINP(),this.setLCP(),this.setFCP(),this.setCLS())}hasWebVitals(){return this.lcp||this.fcp||this.cls||this.inp?1:0}setLCP(){((e,t={})=>{const n=In(t=Object.assign({},t),sr),r=new WeakMap;n.m=e=>{if(e.element){const n=(t.generateTarget??Tn)(e.element);r.set(e,n)}},((e,t={})=>{Wn((()=>{const n=Hn();let r,i=Mn("LCP");const o=In(t,sr),s=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)o.u(t),t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-Ln(),0),i.entries=[t],r())},a=Vn("largest-contentful-paint",s);if(a){r=Rn(e,i,ar,t.reportAllChanges);const n=xn((()=>{s(a.takeRecords()),a.disconnect(),r(!0)}));for(const e of["keydown","click","visibilitychange"])addEventListener(e,(()=>ir(n)),{capture:!0,once:!0});_n((n=>{i=Mn("LCP"),r=Rn(e,i,ar,t.reportAllChanges),Nn((()=>{i.value=performance.now()-n.timeStamp,r(!0)}))}))}}))})((t=>{const n=(e=>{let t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){const n=En();if(n){const i=n.activationStart||0,o=e.entries.at(-1),s=o.url&&performance.getEntriesByType("resource").filter((e=>e.name===o.url))[0],a=Math.max(0,n.responseStart-i),c=Math.max(a,s?(s.requestStart||s.startTime)-i:0),l=Math.min(e.value,Math.max(c,s?s.responseEnd-i:0));t={target:r.get(o),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:l-c,elementRenderDelay:e.value-l,navigationEntry:n,lcpEntry:o},o.url&&(t.url=o.url),s&&(t.lcpResourceEntry=s)}}return Object.assign(e,{attribution:t})})(t);e(n)}),t)})((e=>{var t;this.lcp=e.value,this.lcp>2500&&null!==(t=e.attribution)&&void 0!==t&&t.target&&(this.lcpOffender=e.attribution.target)}))}setFCP(){((e,t={})=>{Gn((t=>{const n=(e=>{let t={timeToFirstByte:0,firstByteToFCP:e.value,loadState:Sn(Dn())};if(e.entries.length){const n=En(),r=e.entries.at(-1);if(n){const i=n.activationStart||0,o=Math.max(0,n.responseStart-i);t={timeToFirstByte:o,firstByteToFCP:e.value-o,loadState:Sn(e.entries[0].startTime),navigationEntry:n,fcpEntry:r}}}return Object.assign(e,{attribution:t})})(t);e(n)}),t)})((e=>this.fcp=e.value))}setINP(){let e=t=>{const n=this.inp;if(this.inp=t.value,this.inp>200&&t.attribution){var r,i,o,s;const a=document.location.href;this.inpOffender="".concat(t.attribution.interactionType,"::").concat(t.attribution.interactionTarget||"elementOutOfDom"),this.inpOffenderStatus=t.attribution.loadState,this.inpOffenderScript=(null===(r=t.attribution.longestScript)||void 0===r||null===(r=r.entry)||void 0===r?void 0:r.sourceURL)||"Not Available",this.inpOffenderScript===a&&(this.inpOffenderScript="inline"),this.inpOffenderScriptFn=(null===(i=t.attribution.longestScript)||void 0===i||null===(i=i.entry)||void 0===i?void 0:i.sourceFunctionName)||"Not Available",this.inpOffenderScriptInvoke=(null===(o=t.attribution.longestScript)||void 0===o||null===(o=o.entry)||void 0===o?void 0:o.invoker)||"Not Available",this.inpInputDelay=t.attribution.inputDelay,this.inpProcessingDuration=t.attribution.processingDuration,this.inpPresentationDelay=t.attribution.presentationDelay,this.inpIntersectionDuration=null===(s=t.attribution.longestScript)||void 0===s?void 0:s.intersectingDuration,this.inpOffenderScriptInvoke===a&&(this.inpOffenderScriptInvoke="inline"),"Not Available"===this.inpOffenderScript&&this.inp!==n&&(e=()=>{},this.setINP())}};((e,t={})=>{const n=In(t=Object.assign({},t),rr);let r=[],i=[],o=0;const s=new WeakMap,a=new WeakMap;let c=!1;const l=()=>{c||(ir(u),c=!0)},u=()=>{const e=n.l.map((e=>s.get(e.entries[0]))),t=i.length-50;i=i.filter(((n,r)=>r>=t||e.includes(n)));const a=new Set;for(const e of i){const t=d(e.startTime,e.processingEnd);for(const e of t)a.add(e)}const l=r.length-1-50;r=r.filter(((e,t)=>e.startTime>o&&t>l||a.has(e))),c=!1};n.m=e=>{const t=e.startTime+e.duration;let n;o=Math.max(o,e.processingEnd);for(let r=i.length-1;r>=0;r--){const o=i[r];if(Math.abs(t-o.renderTime)<=8){n=o,n.startTime=Math.min(e.startTime,n.startTime),n.processingStart=Math.min(e.processingStart,n.processingStart),n.processingEnd=Math.max(e.processingEnd,n.processingEnd),n.entries.push(e);break}}n||(n={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:t,entries:[e]},i.push(n)),(e.interactionId||"first-input"===e.entryType)&&s.set(e,n),l()},n.p=e=>{if(!a.get(e)){const n=(t.generateTarget??Tn)(e.entries[0].target);a.set(e,n)}};const d=(e,t)=>{const n=[];for(const i of r)if(!(i.startTime+i.duration<e)){if(i.startTime>t)break;n.push(i)}return n};Vn("long-animation-frame",(e=>{r=r.concat(e),l()})),((e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Wn((()=>{"interactionCount"in performance||er||(er=Vn("event",Qn,{type:"event",buffered:!0,durationThreshold:0}));let n,r=Mn("INP");const i=In(t,rr),o=e=>{ir((()=>{for(const t of e)i.u(t);const t=i.M();t&&t.T!==r.value&&(r.value=t.T,r.entries=t.entries,n())}))},s=Vn("event",o,{durationThreshold:t.durationThreshold??40});n=Rn(e,r,or,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(o(s.takeRecords()),n(!0))})),_n((()=>{i.v(),r=Mn("INP"),n=Rn(e,r,or,t.reportAllChanges)})))}))})((t=>{const r=(e=>{const t=e.entries[0],r=s.get(t),i=t.processingStart,o=Math.max(t.startTime+t.duration,i),c=Math.min(r.processingEnd,o),l=r.entries.sort(((e,t)=>e.processingStart-t.processingStart)),u=d(t.startTime,c),h=n.h.get(t.interactionId),p={interactionTarget:a.get(h),interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:o,processedEventEntries:l,longAnimationFrameEntries:u,inputDelay:i-t.startTime,processingDuration:c-i,presentationDelay:o-c,loadState:Sn(t.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};return(e=>{if(!e.longAnimationFrameEntries?.length)return;const t=e.interactionTime,n=e.inputDelay,r=e.processingDuration;let i,o,s=0,a=0,c=0,l=0;for(const c of e.longAnimationFrameEntries){a=a+c.startTime+c.duration-c.styleAndLayoutStart;for(const e of c.scripts){const c=e.startTime+e.duration;if(c<t)continue;const u=c-Math.max(t,e.startTime),d=e.duration?u/e.duration*e.forcedStyleAndLayoutDuration:0;s+=u-d,a+=d,u>l&&(o=e.startTime<t+n?"input-delay":e.startTime>=t+n+r?"presentation-delay":"processing-duration",i=e,l=u)}}const u=e.longAnimationFrameEntries.at(-1),d=u?u.startTime+u.duration:0;d>=t+n+r&&(c=e.nextPaintTime-d),i&&o&&(e.longestScript={entry:i,subpart:o,intersectingDuration:l}),e.totalScriptDuration=s,e.totalStyleAndLayoutDuration=a,e.totalPaintDuration=c,e.totalUnattributedDuration=e.nextPaintTime-t-s-a-c})(p),Object.assign(e,{attribution:p})})(t);e(r)}),t)})((function(){return e(...arguments)}),{reportAllChanges:!0})}setTbt(){return!!((e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const n=new PerformanceObserver((e=>{e.getEntries().map((e=>t(e)))}));return n.observe({type:e,buffered:!0}),n}}catch(e){}})("longtask",(e=>{this.tbt+=e.duration-50}))}setCLS(){((e,t={})=>{const n=In(t=Object.assign({},t),Cn),r=new WeakMap;n.t=e=>{if(e?.sources?.length){const n=$n(e.sources);if(n){const e=(t.generateTarget??Tn)(n.node);r.set(n,e)}}},((e,t={})=>{Gn(xn((()=>{let n,r=Mn("CLS",0);const i=In(t,Cn),o=e=>{for(const t of e)i.u(t);i.o>r.value&&(r.value=i.o,r.entries=i.i,n())},s=Vn("layout-shift",o);s&&(n=Rn(e,r,Kn,t.reportAllChanges),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(o(s.takeRecords()),n(!0))})),_n((()=>{i.o=0,r=Mn("CLS",0),n=Rn(e,r,Kn,t.reportAllChanges),Nn((()=>n()))})),setTimeout(n))})))})((t=>{const n=(e=>{let t={};if(e.entries.length){const n=e.entries.reduce(((e,t)=>e.value>t.value?e:t));if(n?.sources?.length){const e=$n(n.sources);e&&(t={largestShiftTarget:r.get(e),largestShiftTime:n.startTime,largestShiftValue:n.value,largestShiftSource:e,largestShiftEntry:n,loadState:Sn(n.startTime)})}}return Object.assign(e,{attribution:t})})(t);e(n)}),t)})((e=>{var t;this.cls=e.value,this.cls>.1&&null!==(t=e.attribution)&&void 0!==t&&t.largestShiftTarget&&(this.clsOffender=e.attribution.largestShiftTarget,this.clsOffenderStatus=e.attribution.loadState)}),{reportAllChanges:!0})}}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const dr=new Qt;let hr={150:6e4};const pr=()=>{dr.cleanTimer()},mr=(e,t)=>{dr.callOnTimer(t,e)},{userIdPromise:fr,resolveFinalUserId:gr}=(()=>{let e=()=>{};return{userIdPromise:new Promise((t=>{e=t})),resolveFinalUserId:e}})();class vr{constructor(e){this.compassTracker=e}getUserId(){return{userIdPromise:fr,actualUserId:this.compassTracker.permanentCookie.userId}}processIdentity(e){e&&(Ie(e.uid)&&(this.compassTracker.permanentCookie.userId=e.uid,this.compassTracker.markAsModified("permanent")),Ie(e.sid)&&(this.compassTracker.temporalCookie.sessionId=e.sid,this.compassTracker.markAsModified("temporal")),this.compassTracker.saveCookies()),Ie(this.compassTracker.permanentCookie.userId)&&gr(this.compassTracker.permanentCookie.userId)}}const yr={web:0,fbia:2,iosapp:3,androidapp:4,flowcards:5,pressreader:6,app:7,applenews:8,pressreaderandroid:11,pressreaderios:12},br=e=>{if(isNaN(e)){const t=e.toLowerCase().replace(/ /g,"");return void 0!==yr[t]?yr[t]:null}return e};var wr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{},kr=wr&&wr.__assign||function(){return(kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Or=wr&&wr.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Cr=wr&&wr.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Er=function(e){if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}return!1},Sr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return Object.keys(t).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=Sr.options.mergeArrays?Array.from(new Set(e[n].concat(t[n]))):t[n]:Er(e[n])&&Er(t[n])?e[n]=Sr(e[n],t[n]):e[n]=t[n]})),e}),{})},Pr={mergeArrays:!0};Sr.options=Pr,Sr.withOptions=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Sr.options=kr({mergeArrays:!0},e);var r=Sr.apply(void 0,Cr([],Or(t),!1));return Sr.options=Pr,r};var Tr=Sr;function Ar(){return Ir.apply(this,arguments)}function Ir(){return(Ir=r((function*(){return(yield new Promise((e=>{var t,n;(window.marfeel=null!==(t=window.marfeel)&&void 0!==t?t:{},window.marfeel.cmd=null!==(n=window.marfeel.cmd)&&void 0!==n?n:[],window.marfeel.cmd).push(["consent",t=>{e(t)}])}))).getConsent("cookies")?localStorage:sessionStorage}))).apply(this,arguments)}function jr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;try{var r=e.getItem(t);return r?JSON.parse(n(r)):null}catch(e){}return null}var Dr=Promise.resolve(!0);function _r(){return(_r=r((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return jr(yield Ar(),e,t)}))).apply(this,arguments)}function Rr(){return(Rr=r((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t,n){var{isPatch:i=!1,encoder:o=(e=>e),decoder:s=(e=>e)}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Dr=Dr.then(r((function*(){try{var r=i&&jr(e,t,s)||{};return e.setItem(t,o(JSON.stringify(Tr.withOptions({mergeArrays:!1},r,n)))),!0}catch(e){}return!1})))}(yield Ar(),e,t,n)}))).apply(this,arguments)}var Nr=btoa,Lr=atob;function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.update=Date.now(),function(e,t){return Rr.apply(this,arguments)}("marfeel-sdk-store",e,{encoder:Nr,decoder:Lr,isPatch:t})}function Vr(){return(Vr=r((function*(){return(yield function(e){return _r.apply(this,arguments)}("marfeel-sdk-store",Lr))||function(){var e={creation:Date.now(),update:Date.now(),entries:{}};return Mr(e),e}()}))).apply(this,arguments)}function xr(e){return Ur.apply(this,arguments)}function Ur(){return(Ur=r((function*(e){return(yield function(){return Vr.apply(this,arguments)}()).entries[e]}))).apply(this,arguments)}function Fr(e,t){return qr.apply(this,arguments)}function qr(){return(qr=r((function*(e,t){return Mr({entries:{[e]:t}},!0)}))).apply(this,arguments)}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(null==n||""===n){let n=0;for(;n<e.length;)e[n][0]===t?e.splice(n,1):n++}else{const r=[t,n];let i=!1;for(let n=0;n<e.length;n++)e[n][0]===t&&(e[n]=r,i=!0);i||e.push(r)}}let Br=[];const Hr=(e,t)=>{zr(Br,e,t)};let Wr=[],Jr=null;const Gr=()=>Jr=null,Kr=e=>{const t=e.parentElement;t&&(t.addEventListener("mouseenter",(()=>(e=>{Jr=e})(e))),t.addEventListener("mouseleave",Gr))},$r=(e,t,n)=>{const r=Array.from(e).filter((e=>!e.hasAttribute("cmp-cnvtrk")));for(const e of r)e.addEventListener(t,(()=>{const t=e.dataset.mrfConversion;t&&n(t)})),e.setAttribute("cmp-cnvtrk","true")},Xr=e=>{const t=document.querySelectorAll("iframe[data-mrf-conversion]"),n=document.querySelectorAll("form[data-mrf-conversion]"),r=document.querySelectorAll("button[data-mrf-conversion], a[data-mrf-conversion]");$r(n,"submit",e),$r(r,"click",e),(e=>{const t=Array.from(e).filter((e=>!e.hasAttribute("cmp-cnvtrk")));for(const e of t)Kr(e),e.setAttribute("cmp-cnvtrk","true")})(t)},Yr=e=>{oe((()=>{Xr(e)})),Xr(e)},Zr=e=>{let t=(null!=e?e:"").toString();return!t.startsWith("/")&&t.includes("/")&&(t="/".concat(t)),t.split("/").map((e=>e.split(",").shift())).join("/")};class Qr{constructor(){this.newAds=[],this.newAdUnitPaths=[],this.trackedAds={},this.refreshedAds={}}setInterstitialSlot(e){this.interstitialSlot=e}trackAdEvent(e,t){const n=t.getSlotElementId();let r=!1;if("slotRenderEnded"===e&&(this.trackedAds[n]&&(this.refreshedAds[n]=!0),this.trackedAds[n]=!1,r=t!==this.interstitialSlot&&!this.refreshedAds[n]),"slotVisibilityChanged"===e&&(r=(t===this.interstitialSlot||this.refreshedAds[n])&&!this.trackedAds[n]),r){const e=t.getAdUnitPath(),r=t.getResponseInformation()&&t.getResponseInformation().lineItemId;this.trackAdRenderedInternal(r||e,e),this.trackedAds[n]=!0}return r}trackAdEventLegacy(e,t,n){return"slotRenderEnded"===e&&(this.trackAdRenderedInternal(t||n,n),!0)}trackAdRenderedInternal(e,t){this.newAds.push(Zr(e)),t&&this.newAdUnitPaths.push(Zr(t))}getAds(){return this.newAds.splice(0)}getAdUnits(){return this.newAdUnitPaths.splice(0)}}function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ni=(e,t)=>{((e,t)=>{const n={requests:{ads:e},triggers:{renderEnd:{on:"ad-render-end",request:"ads",selector:"body",extraUrlParams:ti(ti({},t),{},{l:"${totalEngagedTime}",sc:Me(!1),a:"-1",ps:"${navTiming(navigationStart)}",n:"${timestamp}",ads:"$IF(${adSlot}, ${adSlot}, -1)amp",ampFirst:"true"})}},transport:{beacon:!0,xhrpost:!0,image:!1}},r=()=>{document.body.appendChild((e=>{const t=document.createElement("amp-analytics"),n=document.createElement("script");return n.type="application/json",n.innerText=JSON.stringify(e),t.appendChild(n),t})(n))};"loading"===document.readyState?window.addEventListener("load",(()=>r())):r()})(e,t)};class ri{constructor(){this.events={}}on(e,t){void 0===this.events[e]&&(this.events[e]={listeners:[]}),this.events[e].listeners.push(t)}remove(e,t){this.events[e].listeners=this.events[e].listeners.filter((e=>e.toString()!==t.toString()))}dispatch(e,t){this.events[e]&&this.events[e].listeners.forEach((e=>{e(t)}))}}function ii(e,t){try{const n=[...t],r=n.shift();let i;if(Array.isArray(e)){const n=e.map((e=>ii(e,t))).filter(Boolean);i=n.length&&n[0]}else i=e[r];return 0===n.length?i?null==i?void 0:i.toString():null:ii(i,n)}catch(e){return null}}function oi(e){var t,n;return null!==(n=null!==(t=e["@type"])&&void 0!==t?t:e.type)&&void 0!==n?n:void 0}function si(e){var t,n,r,i;if(e)return"string"==typeof e?e:Object.assign(Object.assign({},e),{"@type":null!==(n=null!==(t=e["@type"])&&void 0!==t?t:e.type)&&void 0!==n?n:void 0,"@id":null!==(i=null!==(r=e["@id"])&&void 0!==r?r:e.id)&&void 0!==i?i:void 0})}function ai(e){var t,n,r,i;return Object.assign(Object.assign({},e),{"@type":null!==(n=null!==(t=e["@type"])&&void 0!==t?t:e.type)&&void 0!==n?n:void 0,"@id":null!==(i=null!==(r=e["@id"])&&void 0!==r?r:e.id)&&void 0!==i?i:void 0,mainEntityOfPage:si(e.mainEntityOfPage)})}function ci(e,t){const n=oi(e);return!!n&&t.includes(n)}function li(e,t,n,r=new Set){if(!e||r.has(e))return!1;if(e===t)return!0;r.add(e);const i=((e,t)=>e.find((e=>((e,t)=>"@id"in e&&e["@id"]===t)(e,t))))(n,e);return!!(null==i?void 0:i.url)&&li(i.url,t,n,r)}function ui(e,t){return e.filter((e=>ci(e,[t])))}function di(e,t,n){const r=e.mainEntityOfPage;return li(r&&"object"==typeof r&&"@id"in r?r["@id"]:r,t,n)}function hi(e,t){return e.reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),{"@type":t})}const pi=["ReportageNewsArticle","AnalysisNewsArticle","OpinionNewsArticle","ReviewNewsArticle","BackgroundNewsArticle","NewsArticle","ScholarlyArticle","Report","TechArticle","AskPublicNewsArticle","SatiricalArticle","AdvertiserContentArticle","BlogPosting","LiveBlogPosting","SocialMediaPosting","Recipe","Article"];var mi=Object.freeze({__proto__:null,ARTICLE_ENTITY_TYPES_PRIORITIES:pi,extract:function({attributePath:e,entitiesConstraint:t},n){var r;try{const i=document.querySelectorAll('script[type="application/ld+json"]');return i&&e?ii(null!==(r=function(e,t,n){const r=(e=>Array.from(e).map((e=>{var t;try{const n=e.textContent?((null===(t=e.textContent)||void 0===t?void 0:t.trim())||"").replace(/[\n\t]/g,""):"{}";return JSON.parse(`${n}`)}catch(e){return null}})).filter(Boolean).map((e=>e instanceof Array?e:[e])).map((e=>e.map((e=>(e=>{if("@graph"in e){const t=e["@graph"];if(t instanceof Array)return[e,...t];if(t)return[e,t]}return[e]})(e))).flat().filter((e=>!!oi(e))).map(ai))).flat())(e),i=function(e,t){return e.filter((e=>e.mainEntityOfPage&&ci(e,t)))}(r,t);let o;return o=1===i.length?i[0]:i.length>1&&n?function(e,t,n,r){for(const i of n){const n=ui(e,i).filter((e=>di(e,t,r)));if(n.length>0)return hi(n,i)}return null}(i,n,t,r):function(e,t){for(const n of t){const t=ui(e,n);if(t.length>0)return hi(t,n)}return null}(r,t),o}(i,null!=t?t:pi,n))&&void 0!==r?r:[],e):null}catch(e){return null}}});const fi=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.\d+)?(Z|[+-]\d{2}:\d{2})$/;function gi(e){let t;return t=fi.test(e)?new Date(e):new Date(e+"Z"),t.getTime()}const vi={jsonLD:mi,querySelector:Object.freeze({__proto__:null,extract:function({queries:e}){if(!e)return null;const t=e.reduce(((e,{query:t,attribute:n})=>(document.querySelectorAll(t).forEach((t=>{n?e.push(t.getAttribute(n)||null):t.textContent&&e.push(t.textContent)})),e)),[]).filter((e=>null!==e));return 1===t.length||t.length>1&&t.every((e=>e===t[0]||gi(e)===gi(t[0])))?t[0]:null}})},yi=(e,t)=>{for(const n of e){const e=vi[n.type].extract(n,t);if(e)return e}return null},bi=[{type:"jsonLD",attributePath:["dateModified"],entitiesConstraint:pi},{type:"querySelector",queries:[{query:'meta[property="article:modified_time"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[itemprop="dateModified"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'time[itemprop="dateModified"]',attribute:"datetime"}]},{type:"querySelector",queries:[{query:'time[itemprop="dateModified"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'[itemprop="dateModified"]'}]}];var wi=Object.freeze({__proto__:null,extract:e=>yi(bi,e)});const ki=[{type:"jsonLD",attributePath:["datePublished"],entitiesConstraint:pi},{type:"querySelector",queries:[{query:'[itemtype="http://schema.org/NewsArticle"] time[itemprop="datePublished"]',attribute:"datetime"}]},{type:"querySelector",queries:[{query:'meta[property="article:published_time"]',attribute:"content"},{query:':not([itemprop="image"]) > meta[itemprop="datePublished"]',attribute:"content"},{query:'time[itemprop="datePublished"]',attribute:"datetime"},{query:'time[itemprop="datePublished"]',attribute:"content"},{query:'meta[name="cXenseParse:recs:publishtime"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'[itemprop="datePublished"]'}]}];var Oi=Object.freeze({__proto__:null,extract:e=>yi(ki,e)});const Ci=[{type:"jsonLD",attributePath:["offers","lowPrice"],entitiesConstraint:["Product"]},{type:"jsonLD",attributePath:["offers","price"],entitiesConstraint:["Product"]},{type:"querySelector",queries:[{query:'[itemprop="offers"] [itemprop="price"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[property="product:price:amount"]',attribute:"content"}]}];var Ei=Object.freeze({__proto__:null,extract:e=>yi(Ci,e)});const Si=[{type:"jsonLD",attributePath:["offers","availability"],entitiesConstraint:["Product"]},{type:"querySelector",queries:[{query:'[itemprop="offers"] link[itemprop="availability"]',attribute:"href"},{query:'[itemprop="offers"] [itemprop="availability"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[property="product:availability"]',attribute:"content"}]}],Pi={updateTime:wi,publishTime:Oi,availability:Object.freeze({__proto__:null,extract:e=>yi(Si,e)}),price:Ei},Ti=(e,t)=>Pi[e].extract(t),Ai=[void 0,null,""];function Ii(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURIComponent;return Ai.includes(e)?"":t(e)}function ji(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;return Ai.includes(e)?void 0:t(e)}const Di=[Ii,ji],_i=[function(e){return Ai.includes(e)?"":Number(e).toString(36)},function(e){return Ai.includes(e)?void 0:parseInt(e,36)}],Ri=[function(e){return Ai.includes(e)?"":Number(e).toString(10)},function(e){return Ai.includes(e)?void 0:parseInt(e,10)}],Ni=[function(e){return Ai.includes(e)?"":"".concat(e)},function(e){if(!Ai.includes(e))return"true"===e}],Li=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:encodeURIComponent,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:encodeURIComponent,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;return[t=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURIComponent;if(e)try{return t(JSON.stringify(e))}catch(n){return t(e)}return""}(t,e),e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;if(e)try{return JSON.parse(t(e))}catch(n){return t(e)}}(e,t)]}(e,t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:encodeURIComponent,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;return[t=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURIComponent;if(Ai.includes(e))return"";try{return new URL(e),t(e)}catch(e){return""}}(t,e),e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;if(!Ai.includes(e))try{const n=t(e);return new URL(n),n}catch(e){return}}(e,t)]}(e,t),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:encodeURIComponent,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;return[t=>Ii(t,e),e=>ji(e,t)]}(e,t);return{___nrbic:[["lastBeat",_i],["previousVisit",_i],["currentVisitStarted",_i],["sessionId",i],["sessionVars",n],["visitedInThisSession",Ni],["pagesViewed",Ri],["landingPage",i],["referrer",r],["lpti",i],["isNewUser",Ni]],___nrbi:[["firstVisit",_i],["userId",i],["userVars",n],["futurePreviousVisit",_i],["timesVisited",Ri],["siteUserId",i],["userType",i],["userSegments",n]]}};function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const xi={1:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Li(escape,unescape)),2:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Li(encodeURIComponent,decodeURIComponent))};function Ui(e){return e.replace(/_\d+$/,"")}function Fi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=xi[n][Ui(e)];if(!r)return JSON.stringify(t);const i=[n,...r.map((e=>{const n=e[0],r=e.length>1?e[1][0]:Di[0];return Ai.includes(t[n])?"":r(t[n])}))].join("|");return i}const qi=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(t){const t=ct(e,!1);return t&&!function(e){return e.startsWith(encodeURIComponent("{"))}(t)?function(e,t){var n,r;const i=t.split("|"),o=isNaN(i[0])?2:parseInt(i[0],10),s=null===(n=null!==(r=xi[o])&&void 0!==r?r:xi[2])||void 0===n?void 0:n[Ui(e)];if(!s)return{};const a={};for(let e=0;e<s.length;e++){const t=s[e],n=t[0],r=t.length>1?t[1][1]:Di[1],o=i[e+1];Ai.includes(o)||(a[n]=r(o))}return a}(e,t):JSON.parse(decodeURIComponent(t))||{}}return(e=>{const t=Fe(e);if(t)try{return JSON.parse(t)}catch(e){}return null})(e)||{}}catch(e){return{}}},zi=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t?qi("".concat(e,"_").concat(t),n):null;return r&&0!==Object.keys(r).length?r:qi(e,n)};function Bi(e,t){let n=0;return e.active&&(n=5),Math.min(t-e.time,n)}class Hi{constructor(){this.totalEngagedTime=0,this.prevEvent=void 0}pushEvent(e){this.prevEvent&&this.prevEvent.time<e.time&&(this.totalEngagedTime+=Bi(this.prevEvent,e.time)),this.prevEvent=e}getTotalEngagedTime(e){let t=0;return void 0!==this.prevEvent&&(t=this.totalEngagedTime+Bi(this.prevEvent,e)),t}}const Wi=["mousedown","mouseup","mousemove","keydown","keyup","scroll","touchstart","touchmove","touchend","pointerdown","pointermove","pointerup","MRF_MULTIMEDIA_ENGAGED"],Ji=["mouseleave"];class Gi{constructor(){this.startTime=Date.now(),this.listeningActive=!1,this.listeningInactive=!1,this.acitvityHistory=new Hi,this.listenToEvents(),"visible"===document.visibilityState&&this.eventTriggered(!0)}listenToEvents(){Wi.forEach((e=>{document.addEventListener(e,(()=>{this.eventTriggered(!0)}))})),Ji.forEach((e=>{document.addEventListener(e,(()=>this.eventTriggered(!1)))})),X((()=>this.eventTriggered(!1))),Y((()=>this.eventTriggered(!0)))}getTimeSinceStart(){const e=Date.now()-this.startTime;return e>0?e:0}eventTriggered(e){e&&this.listeningActive||!e&&this.listeningInactive||(this.listeningActive=e,this.listeningInactive=!e,this.handleEvent(e))}handleEvent(e){const t=Math.floor(this.getTimeSinceStart()/1e3);setTimeout((()=>{this.listeningActive=!1,this.listeningInactive=!1}),1e3),this.acitvityHistory.pushEvent({active:e,time:t})}getTotalEngagedTime(){const e=Math.floor(this.getTimeSinceStart()/1e3);return this.acitvityHistory.getTotalEngagedTime(e)}}function Ki(){let e=arguments.length>1?arguments[1]:void 0,t=!1;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{let{selector:n,name:r}=e;document.querySelectorAll(n).forEach((e=>{e.getAttribute("data-mrf-conversion")||(t=!0,e.setAttribute("data-mrf-conversion",r))}))})),t&&Xr(e)}function $i(e,t){Ki(e,t),oe((()=>{Ki(e,t)}))}const Xi="".concat("https://experiences.mrf.io","/passexperience/dw-check.html?v=6");let Yi=!1;const Zi=new Set,Qi="compass-conversions-counter-entry";class eo{constructor(e){this.trackedConversions={},this.lastConversion=null,this.synchronizer=e}async addConversion(e,t){var n;const r=1e3*Math.round((new Date).getTime()/1e3);(null!==(n=this.trackedConversions[e])&&void 0!==n?n:0)!==r&&(await this.synchronizer.wait("pageInitialized"),this.trackedConversions[e]=r,this.lastConversion={conv:e,conv_i:t},(async e=>{const t=await xr(Qi)||{},n=t[e]||0;t[e]=n+1,await Fr(Qi,t)})(e))}resetConversions(){this.trackedConversions={},this.lastConversion=null}getLastConversion(){var e;return null!==(e=this.lastConversion)&&void 0!==e?e:{}}clearLastConversion(){this.lastConversion=null}getAllConversions(){var e;return null!==(e=Object.entries(this.trackedConversions).sort(((e,t)=>{let[,n]=e,[,r]=t;return n-r})).map((e=>{let[t]=e;return t})))&&void 0!==e?e:[]}}class to{constructor(){this.mediaItems=0,this.maxMediaPlayed=0}addItem(){this.mediaItems+=1}setMaxSeconds(e){this.maxMediaPlayed=e}reset(){this.mediaItems=0,this.maxMediaPlayed=0}}const no=["userSegments","userVars"];function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const oo=()=>{},so=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{api:new K(Be),replicas:e,preprocess:e=>e instanceof FormData?(e.append("fk",1),e):(null==e?void 0:e.constructor)===Object?io(io({},e),{},{fk:1}):e}};class ao{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xe,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ye;var i;this.trackerName=window.__mrfCompass?"__mrfCompass":"__newsroom_js",window[this.trackerName].data=window[this.trackerName].data||[],this.handleImmediateCallsToDataArray(),this.tracker=window[this.trackerName],this.userIdManager=new vr(this),this.accountId=this.tracker.accountId,this.cookieDomain=(e=>{if(null===e||!dt(e)){const e=(e=>{const t=e.split(".").filter((e=>"www"!==e));if(t.length<2||de.test(e))return null;if(2===t.length)return t.join(".");const n=t.slice(-2),r=t.length-1;return(e=>{const t=e.length-1;return 2===e[t].length&&!!["avz","co","com","df","gob","gov","org","rt"].includes(e[t-1])})(n)&&n.unshift(t[r-2]),n.join(".")})(window.location.hostname);return".".concat(dt(e)?e:window.location.hostname.replace(/^www\./,""))}return e})(this.tracker.cookieDomain||null),this.initFlags(),this.adsTracker=new Qr,this.adsDelay=1e4,this.temporalCookieModified=!1,this.permanentCookieModified=!1,this.consentManager=t,this.setupConsent(this.tracker),this.synchronizer=n,this.events=r,this.dispatcher=new ri,this.moduleTracker=new vn,this.conversionsStore=new eo(this.synchronizer),this.mediaCounter=new to,this.endpointDomain=(e=>{let{endpoint:t}=e;return t&&ae(t)||ze})(this.tracker),this.api=((...e)=>new Q(...e))(...[new K(this.endpointDomain,{fallback:"https://icu.newsroom.bi",fallbackWindow:6e4,onModeChange:(e,t)=>{e===H.FALLBACK&&this.setPageVar("mrfNE",t)}}),this.tracker.stress&&so(this.tracker.stressReplicas)].filter(Boolean)),this.initializeCookies(),this.tracker.lazy||this.initialize(),this.synchronizer.wait("pageInitialized").then((()=>{X((()=>{(e=>{this.synchronizer.resolve("experimentationDisabled",!1)})(),this.isLastEvent=!0,this.collectAndTrackPage()})),Y(st((()=>{this.isLastEvent&&(pr(),this.trackPage())}),500))})),i=()=>this.trackNewPage({rs:"back forward cache"}),window.addEventListener("pageshow",(e=>{e.persisted&&i()}),{capture:!0}),function(e,t,n){n?ni(e,t):window.customElements.whenDefined("amp-ad").then((()=>ni(e,t)))}("".concat(this.endpointDomain).concat("/ingest.php"),this.getBasicConfig(),this.tracker.isAmpFirst),this.tracker.setFCSource=wn,this.contextVariables={},this.initializeRFV(),this.listenForScrollDepth()}initializeRFV(){this.consentManager.getConsent("personalization")||this.consentManager.onChange((()=>{this.getRFV(oo)}))}initFlags(){var e,t;const n=(e,t)=>Number.isFinite(e)?Math.min(e,365):t;this.tracker.useLocalstorageForUserVars=this.tracker.useLocalstorageForUserVars&&Ct||!1,this.tracker.lazy=this.tracker.lazy||!1,this.tracker.isAmpFirst=this.tracker.isAmpFirst||!1,this.tracker.isCookieSandboxed=this.tracker.isCookieSandboxed||[1464,3838].includes(this.accountId);const r=io({lazy:!1,layouts:[],modules:[]},this.tracker.rm||{});this.tracker.rm=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={},r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),i=Object.assign(new Promise(((e,t)=>Object.assign(n,{set:t=>{const n=t instanceof Function?t(r):t;e(tt(r,n))}}))),n);return t&&i.set({}),i}(r,!r.lazy),this.tracker.usePerformanceEndpoint=this.tracker.usePerformanceEndpoint||!1,this.tracker.adsTrackingFromClient&&(this.nrGoogleTrackingActive=!0),this.tracker.consentCookieLength=n(this.tracker.consentCookieLength,180),this.tracker.noConsentCookieEnabled=n(this.tracker.noConsentCookieEnabled,void 0),null!==(t=(e=this.tracker).blockOnReject)&&void 0!==t||(e.blockOnReject=!1)}setInterstitialSlot(e){this.adsTracker.setInterstitialSlot(e)}canWriteCookies(){return this.consentManager.getConsent("cookies")||Number.isFinite(this.tracker.noConsentCookieEnabled)}canTrack(){return this.getUserConsent(!1)||!this.tracker.blockOnNoConsent&&!this.tracker.blockOnReject||this.tracker.blockOnReject&&2===$e(this.consentManager)}async syncUserVarsFromLocalStorage(){const e=await async function(){return await xr("uvars")}(),t=await xr("usegs");e&&(this.permanentCookie.userVars=e),t&&(this.permanentCookie.userSegments=t),this.initatedLocalStorageForUserVars=!0,this.markAsModified("permanent"),this.synchronizer.resolve("localstorageVarsSynced")}initializeCookies(){this.temporalCookie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;const r=null===t?"":t,i=Ze(e,"currentVisitStarted"),o=Ze(e,"lastBeat",i),s=Ze(e,"referrer"),a=at(r,n),c=""===t,l=!a&&!c,u=new Date;u.setMinutes(u.getMinutes()-30);const d=o<Qe(u);return l&&!d?{sessionId:Ze(e,"sessionId",void 0),currentVisitStarted:Ze(e,"currentVisitStarted"),sessionVars:Ze(e,"sessionVars",[]),lastBeat:o}:l||!o||c&&d?{}:a&&d?{landingPage:Ze(e,"landingPage"),referrer:s||void 0,lpti:Ze(e,"lpti")}:e}(zi("___nrbic",this.tracker.isCookieSandboxed?this.accountId:null,this.canWriteCookies()),le(this.tracker.pageType),this.cookieDomain),this.permanentCookie=zi("___nrbi",this.tracker.isCookieSandboxed?this.accountId:null,this.canWriteCookies()),this.markAsModified("temporal"),this.markAsModified("permanent")}updateLastBeat(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.temporalCookie.lastBeat=Qe(),this.markAsModified("temporal"),e&&this.saveCookies()}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.engagementCalculator=new Gi,this.performanceStartTime=performance.now();const{url:t,rs:n,initialPageVars:r,fromSPA:i}=e,o=t?fe(t):t;pr(),Br=[],Wr=[],Zi.clear(),this.mediaCounter.reset(),r&&Object.keys(r).length>0&&await Promise.all(Object.entries(r).map((async e=>{let[t,n]=e;return await this.setPageVar(t,n)}))),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],void 0===this.nrGoogleTrackingActive&&(this.nrGoogleTrackingActive=!0,googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRenderEnded",(e=>{e.isEmpty||this.trackAdEvent("slotRenderEnded",e.slot)})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{this.trackAdEvent("slotVisibilityChanged",e.slot)}))})));const s=!this.tick&&(e=>{var t,n;return"back forward cache"!==e&&"back_forward"===(null===(t=performance)||void 0===t||null===(n=t.getEntriesByType)||void 0===n||null===(n=n.call(t,"navigation"))||void 0===n||null===(n=n[0])||void 0===n?void 0:n.type)})(n)?"back forward":n;this.adsTracked=!1,this.pageId=null,this.isFirstPage=!0,this.recirculationSource=null,this.newAds=[],this.newAdUnitPaths=[],this.tick=0,this.isLastEvent=!1,this.endpoint=this.tracker.endpoint||He,this.endpointDomain=ae(this.endpoint),this.currentPage=o||ce(this.tracker.pageType,!i),this.startPageTime=Qe(),this.cmsId=(()=>{const e=document.querySelectorAll('meta[property="mrf:cms_id"]');if(e.length)return e[0].getAttribute("content")})(),this.pageId=je(),this.url=o||ce(this.tracker.pageType,!i),this.canonical=o||De(this.tracker.pageType),this.updateTime=Ti("updateTime",this.canonical),this.publishTime=Ti("publishTime",this.canonical),this.setFirstVisit(),this.setPreviousVisit(),this.updateLastBeat(),this.tracker.useLocalstorageForUserVars&&(this.consentManager.getConsent("cookies")?this.syncUserVarsFromLocalStorage():(setTimeout((()=>{this.synchronizer.resolve("localstorageVarsSynced")}),3e3),this.consentManager.onChange((()=>{this.consentManager.getConsent("cookies")&&!this.initatedLocalStorageForUserVars&&this.syncUserVarsFromLocalStorage()})))),this.setCurrentVisitStarted(),this.setTimesVisited(),this.setPagesViewed(),this.setLandingPage(o,this.publishTime),this.setRecirculationSource(s),this.saveCookies(),this.getRFV(oo),this.webVitals=new cr;const a=this.trackPage();return this.setRecirculationTracking(),(e=>{const t=e.trackConversion.bind(e);(e=>{window.addEventListener("blur",(()=>(e=>{Jr&&e(Jr)})(e)))})((e=>{var n;return e&&t(null==e||null===(n=e.dataset)||void 0===n?void 0:n.mrfConversion)})),document.readyState&&"complete"===document.readyState?Yr(t):document.addEventListener("DOMContentLoaded",(()=>{Yr(t)}))})(this),this.dispatcher.dispatch("pageInitialized",{url:this.canonical}),this.synchronizer.resolve("pageInitialized"),a}stopTracking(){pr(),this.isLastEvent=!0,this.collectAndTrackPage()}handleImmediateCallsToDataArray(){window[this.trackerName].data.oldPush=window[this.trackerName].data.push,window[this.trackerName].data.push=e=>{"getRFV"===e[0]?this.getRFV(e[1]):window[this.trackerName].data.oldPush(e)}}setIsNewUser(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.temporalCookie.isNewUser=e,this.markAsModified("temporal"),t&&this.saveCookies()}setFirstVisit(){let e=Ze(this.permanentCookie,"firstVisit");if(!1===e){e=Qe(),this.permanentCookie.firstVisit=e;const t=ct("compass_uid");t?this.permanentCookie.userId=Ie(t)?t:((e,t)=>{const n=Ae(`${e}`,"c0a334de-7622-4bd6-8bff-0b2b750cf2c6");return Ae(`${t}`,n)})(this.accountId,t):(this.permanentCookie.userId=je(),this.setIsNewUser(!0,!1)),this.permanentCookie.userVars=[],this.markAsModified("permanent")}else this.permanentCookie.userVars=this.permanentCookie.userVars||[]}setPreviousVisit(){const e=Ze(this.temporalCookie,"previousVisit"),t=Ze(this.permanentCookie,"futurePreviousVisit");if(!1===e&&!1!==t)this.temporalCookie.previousVisit=t,this.permanentCookie.futurePreviousVisit=Qe(),this.markAsModified("temporal"),this.markAsModified("permanent");else if(!1===e&&!1===t){const e=Qe();this.temporalCookie.previousVisit=e,this.permanentCookie.futurePreviousVisit=e,this.markAsModified("temporal"),this.markAsModified("permanent")}}setCurrentVisitStarted(){let e=Ze(this.temporalCookie,"currentVisitStarted");!1===e?(e=Qe(),this.temporalCookie.currentVisitStarted=e,this.markAsModified("temporal"),this.temporalCookie.sessionId=je(),this.temporalCookie.sessionVars=[]):this.isFirstPage=!1}setTimesVisited(){let e=Ze(this.permanentCookie,"timesVisited");!1!==Ze(this.temporalCookie,"visitedInThisSession")&&!1!==e||(e=!1===e||isNaN(parseInt(e,10))?1:e+1,this.permanentCookie.timesVisited=e,this.temporalCookie.visitedInThisSession=!0,this.markAsModified("permanent"),this.markAsModified("temporal"))}setPagesViewed(){let e=Ze(this.temporalCookie,"pagesViewed");e=!1===e||isNaN(parseInt(e,10))?1:e+1,this.temporalCookie.pagesViewed=e,this.markAsModified("temporal")}setLandingPage(e,t){!1===Ze(this.temporalCookie,"landingPage")&&(this.temporalCookie.landingPage=e||ce(this.tracker.pageType,!0),this.temporalCookie.referrer=ue(this.tracker.pageType),this.temporalCookie.lpti=t,this.markAsModified("temporal"))}getLandingPage(){var e;return null===(e=this.temporalCookie)||void 0===e?void 0:e.landingPage}getLandingPagePublishTime(){var e;return null===(e=this.temporalCookie)||void 0===e?void 0:e.lpti}trackExperience(e){(e=>{Zi.add(e)})(e)}setRecirculationSource(e){if(e)this.recirculationSource=e;else{const e=(e=>{const t=((e,t)=>he(e).search.substring(1).split("&").map((e=>e.split("="))).filter((e=>{let[t]=e;return"utm_cmp_rs"===t})).map((e=>{let[t,n]=e;return decodeURIComponent(n)})).shift())(e);return t||(e=>{const t=It(e),n=Nt(),r=De();return n&&(n[t]||n[r])})(e)})(this.currentPage);e&&(this.recirculationSource=e,(e=>{const t=It(e),n=Nt();n&&(delete n[t],Et("___m_rec",JSON.stringify(n)))})(this.currentPage),(e=>"refresh"===e)(e)&&(this.previousPage=this.canonical))}}setCookieOnCookieDomain(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];lt(e,t,n,r,this.cookieDomain,i)}getCookieExpiration(){var e;const t=this.consentManager.getConsent("cookies"),n=this.tracker.consentCookieLength,r=null!==(e=this.tracker.noConsentCookieEnabled)&&void 0!==e?e:0;if(!t&&0===r)return;const i=new Date(Date.now()),o=t?n:r;return i.setDate(i.getDate()+o),i.toGMTString()}saveTemporalCookie(){const e=this.tracker.isCookieSandboxed?"".concat("___nrbic","_").concat(this.accountId):"___nrbic";this.canWriteCookies()&&this.setCookieOnCookieDomain(e,Fi("___nrbic",this.temporalCookie),this.getCookieExpiration(),"/",!1),qe(e,this.temporalCookie)}savePermanentCookie(){const e=this.tracker.isCookieSandboxed?"".concat("___nrbi","_").concat(this.accountId):"___nrbi";if(this.canWriteCookies()){const t=this.getCookieExpiration(),{actualUserId:n}=this.userIdManager.getUserId();let r=io({},this.permanentCookie);if(this.tracker.useLocalstorageForUserVars&&this.initatedLocalStorageForUserVars){const{userSegments:e,userVars:t}=r,n=L(r,no);Fr("usegs",e),async function(e){Fr("uvars",e)}(t),r=n}this.setCookieOnCookieDomain(e,Fi("___nrbi",r),t,"/",!1),this.saveAmpPermanentCookie(n)}qe(e,this.permanentCookie)}saveAmpPermanentCookie(e){e&&this.setCookieOnCookieDomain("compass_uid",e,this.getCookieExpiration(),"/")}saveCookies(){let{force:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.temporalCookie&&(this.temporalCookieModified||e)&&this.saveTemporalCookie(),this.permanentCookie&&(this.permanentCookieModified||e)&&this.savePermanentCookie()}removeCookies(){const e=this.tracker.isCookieSandboxed?"_".concat(this.accountId):"";ut("".concat("___nrbic").concat(e),"/",this.cookieDomain),ut("".concat("___nrbi").concat(e),"/",this.cookieDomain)}markAsModified(e){this[e+"CookieModified"]=!0}getReferrer(){return this.previousPage||ue(this.tracker.pageType)}getPreviousPage(){const e=this.getReferrer();if(at(e,this.cookieDomain))return e}hasTrackedAds(){return!this.nrGoogleTrackingActive||this.adsTracked}getEngagedTime(){var e;const t=Qe()-this.startPageTime;return"fbia"===(null===(e=this.tracker)||void 0===e?void 0:e.pageType)?t:this.engagementCalculator.getTotalEngagedTime()}async track(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new FormData;return new Promise((t=>{const n=0===this.tick;this.api.post("/ingest.php",e,{contentType:"application/x-www-form-urlencoded",onSuccessCallback:n?e=>{var n;let r={};try{r=JSON.parse(e)}catch(e){}if(Ze(this.temporalCookie,"isNewUser")){const{actualUserId:e,userIdPromise:t}=this.getUserId();t.then((t=>this.setIsNewUser(t===e)))}var i;this.userIdManager.processIdentity(io(io({},r),(e=>{return t={uid:it(e),sid:rt(e)},Object.entries(t).filter((e=>{let[t,n]=e;return void 0!==n})).reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{});var t})(this.url))),r.strategy&&(i=r.strategy,hr=i.reduce(((e,t)=>ur(ur({},e),{},{[t.tick]:t.delay})),{})),r.ads&&(this.adsDelay=r.ads),!this.tracker.stress&&null!==(n=r.mirror)&&void 0!==n&&n.active&&this.api.registerApi(so(r.mirror.replicas)),t()}:void 0,skipResponse:this.isLastEvent,leaving:this.isLastEvent}),this.tick++,n||t()}))}setUserType(e){this.synchronizer.wait("pageInitialized"),this.permanentCookie.userType=e,this.markAsModified("permanent"),this.saveCookies()}getUserId(){return this.userIdManager.getUserId()}getSiteUserId(){return this.permanentCookie.siteUserId}getSessionReferrer(){return this.temporalCookie.referrer}getSessionId(){return this.temporalCookie.sessionId}getPageId(){return this.pageId}getRecirculationSource(){return this.recirculationSource}getFirstVisit(){return this.permanentCookie.firstVisit}getLastVisit(){return this.temporalCookie.previousVisit!==this.permanentCookie.futurePreviousVisit?this.temporalCookie.previousVisit:null}getPageType(){const e=this.tracker.pageType;return e&&br(e)?br(e):0}getUserType(){return function(e){if("number"==typeof e)return e;let t=parseInt(e||"",10);if(isNaN(t))switch(e){case"logged":t=2;break;case"paid":t=3;break;default:t=0}return t}(this.permanentCookie.userType)}getTotalPageviews(){return this.temporalCookie.pagesViewed}getSessionDuration(){return Qe()-this.temporalCookie.currentVisitStarted}getEndpointDomain(){return this.endpointDomain}getFallbackEndpointDomain(){return"https://icu.newsroom.bi"}getStagingEndpointDomain(){return Be}async getUserVarsAsync(){return await this.synchronizer.wait("pageInitialized"),this.tracker.useLocalstorageForUserVars&&this.synchronizer.wait("localstorageVarsSynced"),this.getUserVars()}getUserVars(){return this.permanentCookie.userVars}getSessionVars(){return this.temporalCookie.sessionVars}getPageVars(){return Br}getPageMetrics(){return Wr}getUrl(){return this.url}getPublishTime(){return this.publishTime}setEcommerceData(e){this.ecommerceData=e}getCanonical(){return this.canonical}setSiteUserId(e){this.permanentCookie.siteUserId=e?"".concat(e):void 0,this.markAsModified("permanent"),this.saveCookies()}setCookies(e){this.consentManager.setConsent("cookies",e)}getUserConsent(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.consentManager.getConsent("cookies"):async function(e,t){return e.isInitiated()?e.getConsent(t):await Promise.race([new Promise((e=>setTimeout((()=>e(!0)),5e3))),new Promise((t=>e.onChange((()=>t(!0)))))]).then((async()=>e.getConsent(t)))}(this.consentManager,"cookies")}trackAdEvent(e,t){this.adsTracker.trackAdEvent(e,t)&&-1!==this.adsDelay&&(this.adsTracked=!0,pr(),mr(this.adsDelay,(()=>this.trackPage())))}trackAdRendered(e,t){this.adsTracker.trackAdEventLegacy("slotRenderEnded",e,t)&&-1!==this.adsDelay&&(this.adsTracked=!0,pr(),mr(this.adsDelay,(()=>this.trackPage())))}async setUserVar(e,t){await this.synchronizer.wait("pageInitialized"),this.tracker.useLocalstorageForUserVars&&this.synchronizer.wait("localstorageVarsSynced"),zr(this.permanentCookie.userVars,e,t),this.markAsModified("permanent"),this.saveCookies()}async setSessionVar(e,t){await this.synchronizer.wait("pageInitialized"),zr(this.temporalCookie.sessionVars,e,t),this.markAsModified("temporal"),this.saveCookies()}async setPageVar(e,t){var n;Hr(e,t),n=t,"closed"===e&&this.setUserVar("lastClosed",n)}async setPageMetric(e,t){t&&Number.isInteger(t)&&((e,t)=>{zr(Wr,e,t)})(e,t)}async trackConversion(e,t){await this.conversionsStore.addConversion(e,t),pr(),await this.trackPage()}listenForScrollDepth(){const e="requestAnimationFrame"in window?window.requestAnimationFrame:e=>e(),t=st((()=>e((()=>Me()))),1e3);window.addEventListener("scroll",t,{passive:!0})}async _trackRecirculationEvent(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!this.canTrack())return;const i=await this.getTrackingCommonData(),o=r.map((e=>e.e)).some((e=>e.some((e=>"string"!=typeof e&&!!e.ac2)))),s={t:e,m:r.map((e=>{var t,n;return io(io({},e),{},{e:(null===(t=(n=e.e).map)||void 0===t?void 0:t.call(n,ge))||e.e})})),ac:i.ac,url:i.url,c:i.c,ut:i.ut,fv:i.fv,lv:i.lv,r:i.r,lp:i.lp,pageType:0,sui:i.sui,u:i.u,uc:i.uc,cc:i.cc,n:Qe(),cms_id:i.cms_id};this.tracker.pageType&&"fbia"===this.tracker.pageType&&(s.pageType=2);const a=kt(this.accountId);if(a){const{rfv:e,v:t,f:n,r}=a;s.rfv=e,s.rfv_r=r,s.rfv_f=n,s.rfv_v=t}return this.api.post("".concat("/recirculation/recirculation.php").concat(o?"?c=1":""),(e=>io(io({},e),{},{m:e.m.map((e=>{var t,n;return io(io({},e),{},{e:(null===(t=(n=e.e).map)||void 0===t?void 0:t.call(n,On))||e.e})}))}))(s)),null===(t=this.events)||void 0===t||null===(n=t.emitRecirculation)||void 0===n||n.call(t,s),s}async trackRecirculationEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return await this._trackRecirculationEvent(e,this.moduleTracker.process(e,t))}getBasicConfig(){const{actualUserId:e}=this.getUserId();return io({ac:this.accountId,t:this.temporalCookie.currentVisitStarted,r:this.getSessionReferrer(),url:this.url,c:this.canonical,pp:this.getPreviousPage(),lp:this.getLandingPage(),p:this.pageId,u:e,s:this.getSessionId(),v:.2,cms_id:this.cmsId},this.getLandingPagePublishTime()?{lpti:this.getLandingPagePublishTime()}:{})}async getTrackingCommonData(){const{userIdPromise:e}=this.getUserId();return io(io({},this.getBasicConfig()),{},{u:await e,ua:window.navigator.userAgent,rs:this.getRecirculationSource(),sui:this.getSiteUserId()||"",ut:this.getUserType(),fv:this.getFirstVisit(),lv:this.getLastVisit(),uvar:this.getUserVars(),svar:this.getSessionVars(),pvar:this.getPageVars(),pm:this.getPageMetrics(),uc:await this.getUserConsent(),useg:this.getUserSegments(),cc:$e(this.consentManager)})}async trackPageInternal(){this.tick>0&&(this.performanceStartTime=performance.now());const e=new FormData,{pageNav:t,jsTime:n}=(e=>{if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){const t=window.performance.getEntriesByType("navigation")[0];return gt=gt||window.performance.now()-e,gt>0?{pageNav:t,jsTime:gt}:{}}return{}})(this.performanceStartTime);null!=n&&(e.append("pt",n),void 0!==t&&void 0!==t.domainLookupEnd&&(e.append("pdns",t.domainLookupEnd-t.domainLookupStart),e.append("pcon",t.connectEnd-t.connectStart),e.append("pfet",t.responseEnd-t.fetchStart),e.append("pnet",t.responseEnd-t.requestStart),e.append("pttf",t.responseStart-t.requestStart),e.append("pint",t.domInteractive),e.append("pdcl",t.domContentLoadedEventEnd),e.append("pdclf",t.duration))),e.append("wv",this.webVitals.hasWebVitals()),e.append("lcp",this.webVitals.lcp),e.append("cls",this.webVitals.cls),e.append("fcp",this.webVitals.fcp),e.append("tbt",this.webVitals.tbt),e.append("inp",this.webVitals.inp);const r=e=>{try{if(!this.tracker.inpDrillDown||null===this.webVitals[e])return;this.setPageMetric(e,Math.floor(this.webVitals[e]))}catch(e){}};r("inpInputDelay"),r("inpProcessingDuration"),r("inpPresentationDelay"),r("inpIntersectionDuration"),this.webVitals.lcpOffender&&e.append("lcp_o",this.webVitals.lcpOffender),this.webVitals.clsOffender&&(e.append("cls_o",this.webVitals.clsOffender),e.append("cls_o_s",this.webVitals.clsOffenderStatus)),this.webVitals.inpOffender&&(e.append("inp_o",this.webVitals.inpOffender),e.append("inp_o_s",this.webVitals.inpOffenderStatus),this.webVitals.inpOffenderScript&&e.append("inp_o_src",this.webVitals.inpOffenderScript),this.webVitals.inpOffenderScriptFn&&e.append("inp_o_fn",this.webVitals.inpOffenderScriptFn),this.webVitals.inpOffenderScriptInvoke&&e.append("inp_o_in",this.webVitals.inpOffenderScriptInvoke)),Object.entries(this.getBasicConfig()).forEach((t=>{let[n,r]=t;null!=r&&e.append(n,r)}));const i=this.getUserSegments();null!=i&&i.length&&e.append("useg",JSON.stringify(i)),e.append("n",Qe());const o=Qe()-this.startPageTime;e.append("et",this.getEngagedTime()),e.append("l",o),e.append("ps",this.startPageTime),e.append("ut",this.getUserType()),e.append("sui",this.getSiteUserId()||""),e.append("sc",Me(0===this.tick)),e.append("fv",this.getFirstVisit()),e.append("lv",this.getLastVisit()),e.append("uvar",JSON.stringify(this.getUserVars())),e.append("svar",JSON.stringify(this.getSessionVars())),e.append("pvar",JSON.stringify(this.getPageVars())),e.append("pm",JSON.stringify(this.getPageMetrics())),e.append("nu","".concat(+Ze(this.temporalCookie,"isNewUser"))),e.append("exp",(()=>{try{return JSON.stringify([...Zi.values()])}catch(e){return"[]"}})()),this.isLastEvent&&e.append("le","1"),this.ecommerceData&&e.append("stock",this.ecommerceData.stock),(this.publishTime||this.updateTime)&&(e.append("uti",this.updateTime),e.append("pti",this.publishTime)),this.mediaCounter.mediaItems&&e.append("m_n",this.mediaCounter.mediaItems),this.mediaCounter.maxMediaPlayed&&e.append("m_t",this.mediaCounter.maxMediaPlayed),e.append("ads",this.adsTracker.getAds());const s=this.adsTracker.getAdUnits();s.length>0&&e.append("aups",s);const{conv:a,conv_i:c}=this.conversionsStore.getLastConversion();a&&(e.append("conv",a),c&&e.append("conv_i",c),this.conversionsStore.clearLastConversion());const l=this.conversionsStore.getAllConversions();if(l.length&&e.append("c_t",JSON.stringify(l)),this.recirculationSource&&e.append("rs",this.getRecirculationSource()),e.append("uc",this.isLastEvent?this.getUserConsent(!1):await this.getUserConsent()),e.append("cc",$e(this.consentManager)),e.append("a",this.tick),this.consentManager.getConsent("personalization")){const t=kt(this.accountId);if(t){const{rfv:n,v:r,r:i,f:o}=t;e.append("rfv",n),e.append("rfv_v",r),e.append("rfv_r",i),e.append("rfv_f",o)}}return this.tracker.pageType&&e.append("pageType",br(this.tracker.pageType)),await this.track(e),e}async collectAndTrackPage(){for(;window[this.trackerName].data.length>0;){const e=window[this.trackerName].data.shift();"userType"===e[0]?this.setUserType(e[1]):"userId"===e[0]?this.setSiteUserId(e[1]):"setCookies"===e[0]?this.setCookies(e[1]):"adRendered"===e[0]?this.adsTracker.trackAdEventLegacy("slotRenderEnded",e[1],e[2]):"userVar"===e[0]?this.setUserVar(e[1],e[2]):"sessionVar"===e[0]?this.setSessionVar(e[1],e[2]):"pageVar"===e[0]?this.setPageVar(e[1],e[2]):"pageMetric"===e[0]?this.setPageMetric(e[1],e[2]):"trackConversion"===e[0]?this.trackConversion(e[1],e[2]):"getRFV"===e[0]&&this.getRFV(e[1])}return await this.trackPageInternal()}async trackPage(){if(!this.canTrack())return;this.isLastEvent=!1;let e=null;return 0!==this.tick&&"hidden"===document.visibilityState||(e=await this.collectAndTrackPage()),((e,t)=>{const n=Object.keys(hr).map((e=>parseInt(e,10))).sort(((e,t)=>e-t)).reduce(((t,n)=>null===t&&n>e?n:t),null);n&&dr.callOnTimer(t,hr[n])})(this.tick,(()=>this.trackPage())),e}getRFV(e){if(!this.consentManager.getConsent("personalization"))return e?e(yt):yt;const{userIdPromise:t,actualUserId:n}=this.getUserId(),r=Ze(this.temporalCookie,"isNewUser");return e?t.then((t=>async function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=kt(e);return o?(n(o),o):function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((o=>{const s=wt(e,t,r,i);J(vt,s,{onSuccessCallback:t=>{const r=bt(JSON.parse(t),e);n(r),o(r)},contentType:"application/x-www-form-urlencoded"})}))}(e,t,n,r,i)}(this.accountId,t,e,this.getSiteUserId(),r))):(console.error("Deprecated: please pass a callback to the function getRFV"),function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kt(e)||function(e,t,n){const r=wt(e,t,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=J(vt,r,{sync:!0,contentType:"application/x-www-form-urlencoded"});return bt(JSON.parse(i),e)}(e,t,n,r)}(this.accountId,n,this.getSiteUserId(),r))}async trackNewPage(e){var t;if(null!==(t=history.state)&&void 0!==t&&t.mrfSkip)return;const n=((e,t)=>e?"string"==typeof e?{url:e}:e:{})(e);let{initialPageVars:r}=n;return this.tick>0?(this.isLastEvent=!0,await this.trackPageInternal(),this.previousPage=""+this.canonical):r=io(io({},Object.fromEntries(this.getPageVars())),r),se={},await this.initialize(io(io({},n),{},{initialPageVars:r,fromSPA:!0}))}on(e,t){this.dispatcher.on(e,t)}setupConsent(e){const t=()=>{this.saveAmpPermanentCookie(ct("compass_uid"))};this.consentManager.onChange((()=>{!this.tracker.blockOnReject||this.consentManager.getConsent("cookies")?(this.canWriteCookies()?this.saveCookies({force:!0}):this.removeCookies(),t()):this.stopTracking()}).bind(this)),t();const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{useCookies:t}=e;if(Ke(t))return t;const n=Fe("__nrCookieConsent");return Ke(n)?n:null}(e);null!==n&&this.consentManager.setConsent("cookies",n)}async getPaywallScore(){const{actualUserId:e}=this.userIdManager.getUserId();return this.consentManager.getConsent("personalization")?(async e=>{const t="".concat(pt,"?").concat(ft(e)),n=await window.fetch(t);if(!n.ok)throw new Error(n.status);const{score:r}=await n.json();return r})({accountId:this.accountId,userId:e,siteUserId:this.getSiteUserId()}):ht}async predict(){const{actualUserId:e}=this.userIdManager.getUserId(),t=await(async e=>{const t="".concat(mt,"?").concat(ft(e)),n=await fetch(t);if(!n.ok)throw new Error(n.status);return await n.json()})({accountId:this.accountId,userId:e,siteUserId:this.getSiteUserId(),totalPageviews:this.getTotalPageviews(),sessionDuration:this.getSessionDuration()});return t.probability&&Hr("predict:probability",t.probability),t}async setRecirculationTracking(){return this.setRecirculationTrackingInternal(!0)}async setRecirculationTrackingInternal(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Promise.race([this.synchronizer.wait("experimentation").then((e=>e?this.synchronizer.wait("headline"):Promise.resolve())),this.synchronizer.wait("experimentationFailed"),this.synchronizer.wait("experimentationDisabled").then((()=>Promise.resolve())),new Promise((e=>setTimeout(e,3e3)))]),[{layouts:n}]=await Promise.all([this.tracker.rm,t]);await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};(()=>{if(window.performance){if(window.performance.navigation&&1===window.performance.navigation.type)return!0;if("function"==typeof window.performance.getEntriesByType)return window.performance.getEntriesByType("navigation").map((e=>e.type)).includes("reload")}return!1})()&&Lt("refresh",e),await bn(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{observeDomChanges:r=!0,layouts:i=[]}=t,o=r?mn:pn;jt().forEach((t=>t.shadowRoot&&o(e,t.shadowRoot,{parentNode:t,layouts:i},n))),o(e,document.body,{layouts:i},n)}(t,n,r)}(ce(this.tracker.pageType),((e,t)=>{(e=>{"hidden"!==document.visibilityState?e():document.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState&&e()}),{once:!0})})((()=>this.trackRecirculationEvent(e,t.map((e=>{let{module:t,links:n,position:r}=e;return{n:t,e:n,p:r}})))))}),{observeDomChanges:e,layouts:n},(()=>this.dispatcher.dispatch("recirculationChanged"))),this.synchronizer.resolve("recirculationTracking")}setRecirculationConfig(){let{modules:e=[],layouts:t=[],blacklist:n=[],redirectionLinks:r=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tracker.rm.set((i=>{let{modules:o=[],layouts:s=[],blacklist:a=[],redirectionLinks:c=[]}=i;const l={blacklist:ot([...a,...n]),redirectionLinks:ot([...c,...r]),modules:ot([...o,...e]),layouts:ot([...s,...t])};return this.dispatcher.dispatch("recirculationConfigChanged",io({},l)),l})),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};e.modules.length&&(await bn(),kn(e),oe((()=>{kn(e)&&t()})),t())}({modules:e,blacklist:n,redirectionLinks:r},(()=>{this.setRecirculationTrackingInternal(!1),this.dispatcher.dispatch("recirculationChanged")}))}getRecirculationConfig(){return this.tracker.rm}setRecirculationModules(e){this.setRecirculationConfig({modules:e})}setConversionButtons(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e&&e.length&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;document.readyState&&"complete"===document.readyState?$i(e,t):document.addEventListener("DOMContentLoaded",(()=>{$i(e,t)}))}(e,this.trackConversion.bind(this))}async addUserSegment(e){this.tracker.useLocalstorageForUserVars&&this.synchronizer.wait("localstorageVarsSynced");const t=Ze(this.permanentCookie,"userSegments")||[];this.permanentCookie.userSegments=[...t,e],this.markAsModified("permanent"),this.saveCookies()}async setUserSegments(e){this.tracker.useLocalstorageForUserVars&&this.synchronizer.wait("localstorageVarsSynced"),this.permanentCookie.userSegments="string"==typeof e?e.split(","):e,this.markAsModified("permanent"),this.saveCookies()}removeUserSegment(e){this.permanentCookie.userSegments=this.permanentCookie.userSegments?this.permanentCookie.userSegments.filter((t=>t!==e)):[],this.markAsModified("permanent"),this.saveCookies()}clearUserSegments(){this.permanentCookie.userSegments=[],this.markAsModified("permanent"),this.saveCookies()}async getUserSegmentsAsync(){return await this.synchronizer.wait("pageInitialized"),this.tracker.useLocalstorageForUserVars&&this.synchronizer.wait("localstorageVarsSynced"),this.getUserSegments()}getUserSegments(){var e;return(null===(e=this.permanentCookie)||void 0===e?void 0:e.userSegments)||[]}getContext(e){var t;return e?null===(t=this.contextVariables)||void 0===t?void 0:t[e]:this.contextVariables}setContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.contextVariables=e}trackPaymentMethod(){(e=>{try{const n=e.getSessionVars();if("hub.marfeel.com"===document.location.host)return;if(window.addEventListener("message",(t=>{if("https://experiences.mrf.io"===t.origin){var n,r,i;if(null!==(n=t.data)&&void 0!==n&&n.activePayment)e.setSessionVar("activePaymentMethod",t.data.activePayment);else if(null!==(r=t.data)&&void 0!==r&&r.retryData&&window.PaymentRequest){var o;const{paymentMethod:n,paymentDetails:r}=null===(o=t.data)||void 0===o?void 0:o.retryData;new PaymentRequest([n],r,{}).canMakePayment().then((t=>{t&&e.setSessionVar("activePaymentMethod","applePay")})).catch((()=>{}))}Yi=!1;const s=null===(i=document.body)||void 0===i?void 0:i.querySelector("iframe#".concat("dw-mrf"));s&&document.body.removeChild(s)}})),!Yi||!n.activePaymentMethod){var t;const e=document.createElement("iframe");e.id="dw-mrf",e.setAttribute("allow","payment"),e.setAttribute("style","display:none;"),e.src=Xi,null===(t=document.body)||void 0===t||t.appendChild(e),Yi=!0}}catch(e){}})(this)}async addMediaItemPlayed(){this.mediaCounter.addItem()}async setMediaSecondsPlayed(e){this.mediaCounter.setMaxSeconds(e)}}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class uo extends ao{constructor(e,t,n,r){window.__mrfCompass=lo(lo({data:[]},window.__mrfCompass||{}),e),super(e,t,n,r)}initialize(){}getEndpointDomain(){return"https://events.newsroom.bi"}getRFV(e){var t,n;null===(t=window)||void 0===t||null===(n=t.top)||void 0===n||n.marfeel.cmd.push(["compass",function(){var t=r((function*(t){t.getRFV(e)}));return function(e){return t.apply(this,arguments)}}()])}getTrackingCommonData(){return r((function*(){return new Promise((e=>{var t,n;null===(t=window)||void 0===t||null===(n=t.top)||void 0===n||n.marfeel.cmd.push(["compass",function(){var t=r((function*(t){return e(yield t.getTrackingCommonData())}));return function(e){return t.apply(this,arguments)}}()])}))}))()}}function ho(){return(ho=r((function*(){return new Promise((e=>{try{document.prerendering?document.addEventListener("prerenderingchange",(()=>{window.marfeel.cmd.push(["compass",function(e){e.setPageVar("mrfprerendered_tracked","true")}]),e()})):e()}catch(t){e()}}))}))).apply(this,arguments)}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fo="mrfhud";class go extends ao{constructor(e,t,n,i){var o,s,a,c;window.__mrfCompass=mo(mo({data:[],rm:{lazy:!0}},window.__mrfCompass||{}),e),super(e,t,n,i),function(e){R.apply(this,arguments)}(this,(c=fo,r((function*(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new URL(window.location.href),n=!!t.hash.includes(c);if(n&&e)try{_(function(e,t){var n=new URL(e.href),r=e.hash.split("#").filter((e=>""!==e&&e!==t&&!e.startsWith("".concat(t,"="))));return n.hash=r.length?"#".concat(r.join("#")):"",n.toString()}(t,c))}catch(e){}return n}))),N(fo),N("activate-overlay"),(s="".concat("mrfHudStorage","-").concat(e.accountId),a="".concat("compass-overlay","_").concat(e.accountId),r((function*(){try{var e=window.localStorage.getItem(s);if(e)return JSON.parse(e).entries[a].active}catch(e){}return!1}))),(o=e.accountId,r((function*(){return new Promise((e=>{window.addEventListener("message",(t=>{var{data:n}=t;((e,t)=>{return!(998===(n=e)||"998"===n||window.self!==window.top||"compass_chrome_extension"!==(null==t?void 0:t.origin)||"extension:load_overlay"!==(null==t?void 0:t.type));var n})(o,n)&&e(!0)}))}))}))))}}function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y("compass",["consent","synchronizer","events"],function(){var e=r((function*(e,t){var[n,r]=t;yield function(){return ho.apply(this,arguments)}(),yield I(e,n,r,1e3);try{var i;if(window.top!==window.self&&(null===(i=window.top)||void 0===i?void 0:i.marfeel.config.accountId)===e.accountId)return Promise.resolve(uo)}catch(e){}return Promise.resolve(go)}));return function(t,n){return e.apply(this,arguments)}}()),s(289),y("multimedia",["compass","consent","synchronizer"],function(){var e=r((function*(e,t){var n,r,i,[o,a,c]=t;return yield I(yo(yo({},e),{},{blockOnNoConsent:!(null===(n=e.multimedia)||void 0===n||!n.providers)&&-1!==(null===(r=e.multimedia)||void 0===r||null===(i=r.providers)||void 0===i?void 0:i.indexOf("youtube"))||e.blockOnNoConsent}),a,c),e.multimedia?s.e(761).then(s.bind(s,761)).then((e=>e.default)):Promise.reject()}));return function(t,n){return e.apply(this,arguments)}}());class bo{constructor(){o(this,"promises",void 0),this.promises={}}wait(e){var t,n;null!==(n=(t=this.promises)[e])&&void 0!==n||(t[e]={});var r=this.promises[e].promise;return void 0===r?(r=new Promise(((t,n)=>{this.promises[e].resolve=t,this.promises[e].reject=n})),this.promises[e].promise=r,r):r}resolve(e,t){var n,r;null!==(r=(n=this.promises)[e])&&void 0!==r||(n[e]={}),void 0===this.promises[e].resolve?this.promises[e].promise=Promise.resolve(t):(0,this.promises[e].resolve)(t)}reject(e,t){var n,r;null!==(r=(n=this.promises)[e])&&void 0!==r||(n[e]={}),void 0===this.promises[e].reject?this.promises[e].promise=Promise.reject(t):(0,this.promises[e].reject)(t)}}y("synchronizer",[],(()=>Promise.resolve(bo)));let wo=()=>({emit(e,...t){for(let n=0,r=this.events[e]||[],i=r.length;n<i;n++)r[n](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter((e=>t!==e))}}});function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Co={elegible:"eligible",impression:"impression",click:"click"};class Eo{constructor(){o(this,"emitter",void 0),this.emitter=wo()}on(e,t){this.emitter.on(e,(e=>{"click"===e.t?null==t||t(e):setTimeout((()=>{null==t||t(e)}),0)}))}emitRecirculation(e){var t=function(e){return{t:Co[e.t],m:e.m}}(e),n=function(e){return e.m.reduce(((t,n)=>{var r=n.n;if(r.startsWith("FC_")||r.startsWith("IL_")){var i,o=r.startsWith("IL_")?"inline":"flowcards";return Oo(Oo({},t),{},{["recirculation:".concat(o)]:{t:e.t,m:[...(null===(i=t["recirculation:".concat(o)])||void 0===i?void 0:i.m)||[],n]},["recirculation:".concat(r)]:{t:e.t,m:[n]}})}return Oo(Oo({},t),{},{["recirculation:".concat(r)]:{t:e.t,m:[n]}})}),{})}(t);this.emitter.emit("recirculation",t),Object.keys(n).forEach((e=>{this.emitter.emit(e,n[e])}))}}y("events",[],(()=>Promise.resolve(Eo)));var So=(e,t,n)=>{var r,i;r=((e,t,n)=>{var r=document.createElement("script");return r.src=e,r.id=n,t?r.type="module":(r.setAttribute("nomodule",""),r.setAttribute("defer","")),r})(e,n,t),i=document.head,new Promise(((e,t)=>{r.addEventListener("error",(e=>t(e.error))),r.addEventListener("load",(()=>e())),i.append(r)}))},Po="https://sdk.mrf.io/statics",To={ecommerce:{srcModule:"".concat(Po,"/compass-ecommerce-sdk.js"),srcNoModule:"".concat(Po,"/compass-ecommerce-sdk.es5.js"),dependencies:["compass"]},multimedia:{srcModule:"".concat(Po,"/compass-multimedia-sdk.js"),srcNoModule:"".concat(Po,"/compass-multimedia-sdk.es5.js"),dependencies:["compass"]}},Ao=e=>"".concat(e,"?version=2140");class Io{load(e,t){var n=To[e];t&&function(){v.addConfig(...arguments)}(t),So(Ao(n.srcModule),e,!0),So(Ao(n.srcNoModule),e,!1)}loadFile(e,t,n){So(e,t,n)}}y("loader",[],(()=>Promise.resolve(Io)))})();